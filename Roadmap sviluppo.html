<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Roadmap Interattiva - Il CamaLEOnte</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Fira+Code:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-gold: #f59e0b;
            --accent-orange: #fb923c;
            --border: #334155;
            --accordion-bg: #0f172a;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 40px 20px;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        header {
            text-align: center;
            margin-bottom: 80px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 40px;
            background: radial-gradient(circle at center, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            letter-spacing: -1px;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle { 
            color: var(--text-muted); 
            font-size: 1.3rem; 
            max-width: 700px; 
            margin: 15px auto; 
        }

        .status-badge {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 25px;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-orange));
            color: #000;
            font-weight: 800;
            border-radius: 50px;
            font-size: 1.1rem;
            letter-spacing: 1px;
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.4);
        }

        /* WARNING BOX */
        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--accent-gold);
            color: #fbbf24;
            padding: 25px;
            border-radius: 12px;
            margin: 50px 0;
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }
        .warning-icon { font-size: 28px; flex-shrink: 0; }

        /* TECH STACK BOX */
        .tech-stack {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--accent-blue);
            padding: 30px;
            border-radius: 12px;
            margin: 50px 0;
        }
        .tech-stack h3 {
            color: var(--accent-blue);
            margin-top: 0;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .tech-item {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-blue);
        }
        .tech-item strong { color: var(--accent-blue); }
        .tech-item code {
            display: block;
            margin-top: 5px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        h2 {
            font-size: 2rem;
            margin-top: 80px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }

        /* TIMELINE */
        .timeline { 
            position: relative; 
            padding-left: 20px; 
            border-left: 2px solid var(--border); 
        }
        
        /* MAIN CARD */
        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 35px;
            border: 1px solid var(--border);
            position: relative;
            margin-left: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .card::before {
            content: "";
            position: absolute;
            left: -37px;
            top: 35px;
            width: 25px;
            height: 2px;
            background-color: var(--border);
        }

        .card::after {
            content: "";
            position: absolute;
            left: -46px;
            top: 31px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--text-muted);
            border: 2px solid var(--bg-color);
        }

        .card.active::after { 
            background-color: var(--accent-green); 
            box-shadow: 0 0 15px var(--accent-green); 
        }
        .card.critical::after { 
            background-color: var(--accent-red); 
            box-shadow: 0 0 15px var(--accent-red); 
        }
        .card.gold::after { 
            background-color: var(--accent-gold); 
            box-shadow: 0 0 20px var(--accent-gold); 
        }
        .card.infrastructure::after {
            background-color: var(--accent-purple);
            box-shadow: 0 0 15px var(--accent-purple);
        }

        .card-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 20px; 
            flex-wrap: wrap; 
            gap: 15px; 
        }

        .badge {
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.problem { 
            background: rgba(239, 68, 68, 0.15); 
            color: var(--accent-red); 
            border: 1px solid rgba(239, 68, 68, 0.3); 
        }
        .badge.solution { 
            background: rgba(16, 185, 129, 0.15); 
            color: var(--accent-green); 
            border: 1px solid rgba(16, 185, 129, 0.3); 
        }
        .badge.logic { 
            background: rgba(139, 92, 246, 0.15); 
            color: var(--accent-purple); 
            border: 1px solid rgba(139, 92, 246, 0.3); 
        }
        .badge.gold { 
            background: rgba(245, 158, 11, 0.15); 
            color: var(--accent-gold); 
            border: 1px solid rgba(245, 158, 11, 0.3); 
        }
        .badge.infrastructure {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        .badge.security {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        h3 { 
            margin: 0; 
            font-size: 1.4rem; 
            color: #fff; 
            font-weight: 700;
        }

        /* ACCORDION STYLES */
        .accordion-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .accordion-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .card.expanded .accordion-icon {
            transform: rotate(90deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .card.expanded .card-content {
            max-height: 10000px;
            transition: max-height 0.6s ease-in;
        }

        /* LEVEL 1 ACCORDION (Bullet Points) */
        .level1-accordion {
            margin-top: 20px;
        }

        .level1-item {
            background: var(--accordion-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .level1-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .level1-header:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .level1-title {
            color: var(--text-main);
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level1-icon {
            font-size: 0.9rem;
            transition: transform 0.3s ease;
            color: var(--accent-blue);
        }

        .level1-item.expanded .level1-icon {
            transform: rotate(90deg);
        }

        .level1-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .level1-item.expanded .level1-content {
            max-height: 5000px;
            transition: max-height 0.5s ease-in;
        }

        /* LEVEL 2 ACCORDION (Micro-steps) */
        .level2-steps {
            padding: 0 20px 20px 20px;
        }

        .micro-step {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid var(--accent-green);
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 6px;
        }

        .micro-step.problem-step {
            border-left-color: var(--accent-red);
        }

        .micro-step.solution-step {
            border-left-color: var(--accent-green);
        }

        .micro-step.info-step {
            border-left-color: var(--accent-blue);
        }

        .step-number {
            display: inline-block;
            background: var(--accent-blue);
            color: #000;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-bottom: 8px;
        }

        .step-title {
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .step-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        code {
            font-family: 'Fira Code', monospace;
            background-color: rgba(0,0,0,0.5);
            padding: 3px 8px;
            border-radius: 4px;
            color: var(--accent-blue);
            font-size: 0.85em;
        }

        .code-block {
            background: rgba(0,0,0,0.6);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .code-block code {
            background: transparent;
            padding: 0;
            display: block;
            line-height: 1.6;
            white-space: pre;
        }

        ul { 
            margin: 15px 0; 
            padding-left: 25px; 
            color: var(--text-muted); 
        }
        li { 
            margin-bottom: 8px; 
            line-height: 1.7;
        }
        strong { color: var(--text-main); }

        footer {
            margin-top: 120px;
            text-align: center;
            font-size: 0.95rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            padding-top: 40px;
        }

        .footer-tech {
            margin-top: 15px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            opacity: 0.7;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.6rem; }
            .tech-grid { grid-template-columns: 1fr; }
            .card { padding: 20px; margin-left: 15px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Il CamaLEOnte Project</h1>
            <div class="subtitle">Interactive Engineering Roadmap - Click per espandere ogni sezione</div>
            <div class="status-badge">üèÜ GOLD MASTER v4.0.0</div>
        </header>

        <div class="warning-box">
            <div class="warning-icon">üöÄ</div>
            <div>
                <strong style="font-size: 1.2rem;">Mission Accomplished</strong><br>
                Il progetto ha superato tutte le fasi critiche, dall'architettura iniziale alla distribuzione finale. Clicca su ogni card per esplorare i micro-step dettagliati di ogni fase. Ogni sezione contiene spiegazioni tecniche approfondite del processo risolutivo.
            </div>
        </div>

        <!-- TECH STACK -->
        <div class="tech-stack">
            <h3>üõ†Ô∏è Technology Stack</h3>
            <div class="tech-grid">
                <div class="tech-item">
                    <strong>PDF Rendering Engine</strong>
                    <code>PDF.js v3.11.174 (Mozilla)</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Canvas-based vector rendering con Web Workers</p>
                </div>
                <div class="tech-item">
                    <strong>Page Flip Library</strong>
                    <code>Turn.js (jQuery Plugin)</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Simulazione fisica sfoglio 3D</p>
                </div>
                <div class="tech-item">
                    <strong>DOM Manipulation</strong>
                    <code>jQuery 3.x</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Event handling e responsive engine</p>
                </div>
                <div class="tech-item">
                    <strong>Video AI Integration</strong>
                    <code>Google Veo (Gemini AI)</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Generazione contenuti multimediali</p>
                </div>
                <div class="tech-item">
                    <strong>Hosting & CI/CD</strong>
                    <code>GitHub Pages</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Deploy automatico con versionamento Git</p>
                </div>
                <div class="tech-item">
                    <strong>Analytics Platform</strong>
                    <code>Google Analytics 4</code>
                    <p style="margin: 8px 0 0 0; font-size: 0.85rem; color: var(--text-muted);">Tracking comportamento utenti</p>
                </div>
            </div>
        </div>

        <h2>üî¥ FASE 1: Challenge Log - Analisi Problemi Critici</h2>
        <div class="timeline">
            
            <!-- FASE 1.1 -->
            <div class="card" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Fase 1.1: Raster Quality Limitation</h3>
                    </div>
                    <span class="badge problem">Legacy Tech</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Muro del Pixel</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Identificazione del Problema</div>
                                        <div class="step-description">
                                            Le prime prove utilizzavano una pipeline di conversione PDF ‚Üí PNG tramite tool esterni (es. ImageMagick, Ghostscript). Questi tool generavano bitmap a risoluzione fissa (tipicamente 150-300 DPI).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Manifestazione del Bug</div>
                                        <div class="step-description">
                                            Quando l'utente applicava lo zoom CSS (<code>transform: scale(1.5)</code>), le immagini PNG rivelavano la loro natura raster: bordi frastagliati (aliasing), testo illeggibile, perdita totale di dettaglio. L'effetto era particolarmente evidente su display Retina (iPhone, MacBook Pro) che richiedono risoluzioni @2x o @3x.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Analisi Tecnica Root Cause</div>
                                        <div class="step-description">
                                            I formati raster (PNG, JPG) memorizzano i dati come griglia di pixel. Quando scalati oltre la risoluzione nativa, il browser deve interpolare i pixel mancanti, causando blur e perdita di nitidezza. I PDF, invece, contengono dati vettoriali (curve di B√©zier, font outline) che possono essere renderizzati a qualsiasi scala senza perdita di qualit√†.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Decisione Strategica</div>
                                        <div class="step-description">
                                            Abbandono della pipeline PNG e migrazione verso rendering diretto del PDF tramite libreria JavaScript. Questo approccio garantisce scalabilit√† infinita e qualit√† professionale su ogni device.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Testo Illeggibile</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Inaccessibilit√† del Contenuto</div>
                                        <div class="step-description">
                                            Il testo embedded nelle immagini PNG era completamente inaccessibile. Gli screen reader per utenti ipovedenti non potevano estrarre il contenuto testuale, violando le linee guida WCAG (Web Content Accessibility Guidelines).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">SEO Penalty</div>
                                        <div class="step-description">
                                            I motori di ricerca (Google, Bing) non potevano indicizzare il contenuto della rivista, riducendo drasticamente la discovarability organica del progetto.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Soluzione con PDF.js</div>
                                        <div class="step-description">
                                            PDF.js estrae automaticamente il layer testuale dal PDF durante il rendering. Questo permette selezione, copia/incolla e accessibilit√† nativa, pur mantenendo il layout visuale originale.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Limite Scalabilit√† Display</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Frammentazione Device</div>
                                        <div class="step-description">
                                            I dispositivi moderni hanno densit√† di pixel variabili: iPhone 15 Pro (460 PPI), iPad Pro (264 PPI), Monitor 4K (163 PPI), Laptop standard (96 PPI). Una singola risoluzione PNG non pu√≤ servire efficacemente tutti questi scenari.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Trade-off Peso/Qualit√†</div>
                                        <div class="step-description">
                                            Generare PNG ad altissima risoluzione (es. 4000x5000 px) per supportare tutti i display avrebbe prodotto file enormi (5-10 MB per pagina), rendendo il caricamento proibitivo su reti mobili (4G/5G).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Rendering Adattivo</div>
                                        <div class="step-description">
                                            Con PDF.js, il rendering avviene client-side con scala dinamica. Il parametro <code>scale: 2.5</code> pu√≤ essere adattato in base al <code>window.devicePixelRatio</code>, garantendo nitidezza ottimale su ogni schermo senza overhead di banda.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FASE 1.2 -->
            <div class="card" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Fase 1.2: The Viewport Paradox</h3>
                    </div>
                    <span class="badge problem">Mobile UX</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Geometry Mismatch</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Problema dell'Aspect Ratio</div>
                                        <div class="step-description">
                                            La visualizzazione a doppia pagina ha aspect ratio 2:1 (landscape). Gli smartphone in modalit√† portrait hanno ratio ~9:16 (vertical). Matematicamente impossibile far combaciare questi due formati senza distorsione o cropping.
                                        </div>
                                        <div class="code-block">
                                            <code>Desktop: Width = 1920px, Height = 1080px ‚Üí Ratio 16:9 (OK per doppia pagina)
Mobile Portrait: Width = 390px, Height = 844px ‚Üí Ratio 9:19 (INCOMPATIBILE)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">User Experience Degradata</div>
                                        <div class="step-description">
                                            Forzare la doppia pagina su mobile portrait causava:
                                            <ul style="margin-top: 10px;">
                                                <li>Pagine ridotte a dimensioni illeggibili (font 6-8px equivalente)</li>
                                                <li>Necessit√† di scroll orizzontale (UX anti-pattern su mobile)</li>
                                                <li>Impossibilit√† di leggere il testo senza zoom continuo</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Dati Analytics Critici</div>
                                        <div class="step-description">
                                            L'analisi del traffico mostrava che il 65% degli accessi proveniva da dispositivi mobile. Ignorare questo segmento avrebbe compromesso l'intero progetto. Era necessaria una soluzione responsive nativa.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Overflow Incontrollato</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">CSS Overflow Bug</div>
                                        <div class="step-description">
                                            Turn.js genera un container con larghezza fissa basata sulle dimensioni della doppia pagina. Su viewport stretti, questo container eccedeva i limiti dello schermo, attivando automaticamente lo scrollbar orizzontale.
                                        </div>
                                        <div class="code-block">
                                            <code>/* Comportamento indesiderato */
#flipbook {
    width: 1600px; /* Fisso! */
    height: 800px;
}
/* Su mobile (390px wide) ‚Üí Overflow di 1210px */</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Interaction Breakdown</div>
                                        <div class="step-description">
                                            Lo scroll orizzontale interferiva con il gesture di swipe per girare pagina. L'utente si trovava a scrollare invece di sfogliare, rendendo l'interfaccia controintuitiva e frustrante.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Soluzione: Viewport Constraint</div>
                                        <div class="step-description">
                                            Implementazione di calcolo dinamico che forza il flipbook entro i limiti del viewport disponibile, usando percentuali invece di pixel fissi.
                                        </div>
                                        <div class="code-block">
                                            <code>const availW = $(window).width() * 0.95; // 95% viewport
const availH = $(window).height() * 0.95;
// Calcola dimensioni adattive rispettando il ratio</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Esperienza Mobile Compromessa</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Bounce Rate Elevato</div>
                                        <div class="step-description">
                                            Durante i test A/B, la versione con doppia pagina forzata su mobile registrava un bounce rate del 78% (utenti che abbandonano dopo pochi secondi). Segnale critico di UX fallimentare.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Implementazione Single-Page Mode</div>
                                        <div class="step-description">
                                            Sviluppo di una modalit√† dedicata mobile che mostra una singola pagina alla volta in modalit√† portrait. Questo rispetta il pattern mentale nativo degli utenti smartphone (scroll verticale, tap per navigare).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Auto-Detection Logic</div>
                                        <div class="step-description">
                                            Implementazione di feature detection che infere automaticamente la modalit√† ottimale:
                                        </div>
                                        <div class="code-block">
                                            <code>let isMobile = window.innerWidth < 768;
let isSingleMode = isMobile; // Auto-set basato su device

if (isSingleMode) {
    fb.turn('display', 'single'); // 1 pagina
} else {
    fb.turn('display', 'double'); // 2 pagine
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FASE 1.3 - CORS -->
            <div class="card critical" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Fase 1.3: Cross-Origin Security Policy (CORS)</h3>
                    </div>
                    <span class="badge problem">Browser Security</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Same-Origin Restriction</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Che cos'√® CORS?</div>
                                        <div class="step-description">
                                            Cross-Origin Resource Sharing (CORS) √® una policy di sicurezza implementata dai browser moderni. Impedisce a uno script eseguito su <code>dominio-a.com</code> di accedere a risorse (file, API) su <code>dominio-b.com</code> senza esplicito permesso del server target.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Manifestazione del Problema</div>
                                        <div class="step-description">
                                            Tentando di caricare PDF da un CDN esterno o da Google Drive, il browser bloccava la richiesta con errore:
                                        </div>
                                        <div class="code-block">
                                            <code>Access to fetch at 'https://cdn.example.com/file.pdf' 
from origin 'https://ilcamaleonte.github.io' 
has been blocked by CORS policy: 
No 'Access-Control-Allow-Origin' header is present.</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Perch√© Esiste CORS?</div>
                                        <div class="step-description">
                                            CORS previene attacchi di tipo Cross-Site Request Forgery (CSRF). Senza questa protezione, uno script malevolo su <code>evil.com</code> potrebbe leggere i tuoi dati bancari da <code>bank.com</code> mentre sei autenticato.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Canvas Taint Problem</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Concetto di "Tainted Canvas"</div>
                                        <div class="step-description">
                                            Un Canvas HTML5 diventa "tainted" (contaminato) quando vi viene disegnata un'immagine caricata da un'origine cross-origin. Una volta tainted, √® impossibile estrarre i dati pixel con <code>toDataURL()</code> o <code>getImageData()</code>.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Impatto su PDF.js</div>
                                        <div class="step-description">
                                            PDF.js usa internamente Canvas per renderizzare le pagine. Se il PDF proviene da un dominio esterno senza header CORS, il Canvas diventa inutilizzabile, bloccando completamente il rendering.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Soluzione: Hosting Same-Origin</div>
                                        <div class="step-description">
                                            Decisione strategica di hostare tutti i PDF direttamente nella repository GitHub Pages. Questo garantisce che origine JavaScript e origine PDF siano identiche (<code>ilcamaleonte.github.io</code>), bypassando completamente CORS.
                                        </div>
                                        <div class="code-block">
                                            <code>// ‚úÖ FUNZIONA - Same Origin
const url = '22.pdf'; // Relativo, stesso dominio

// ‚ùå BLOCCATO - Cross Origin
const url = 'https://external-cdn.com/22.pdf';</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Web Workers e CORS</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">PDF.js Worker Architecture</div>
                                        <div class="step-description">
                                            PDF.js utilizza Web Workers per parsare i PDF in background, evitando il freeze dell'UI. Il worker <code>pdf.worker.min.js</code> deve essere caricato da CDN o in locale.
                                        </div>
                                        <div class="code-block">
                                            <code>pdfjsLib.GlobalWorkerOptions.workerSrc = 
  'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">CDN CORS-Enabled</div>
                                        <div class="step-description">
                                            I CDN pubblici come CDNJS e jsDelivr configurano automaticamente gli header CORS (<code>Access-Control-Allow-Origin: *</code>), permettendo il caricamento del worker da qualsiasi origine.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">ArrayBuffer Transfer</div>
                                        <div class="step-description">
                                            Una volta che il PDF √® caricato come ArrayBuffer in memoria, pu√≤ essere passato al worker tramite <code>postMessage()</code> senza vincoli CORS, poich√© i dati sono gi√† client-side.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FASE 1.4 -->
            <div class="card critical" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Fase 1.4: The Race Condition Crash</h3>
                    </div>
                    <span class="badge logic">Async Bug</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Async Timing Issue</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Concetto di Race Condition</div>
                                        <div class="step-description">
                                            Una race condition si verifica quando il risultato di un'operazione dipende dalla sequenza temporale di eventi asincroni. In questo caso, il rendering PDF (asincrono) competeva con la costruzione del DOM interattivo (sincrono).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Timeline del Bug</div>
                                        <div class="step-description">
                                            Sequenza cronologica degli eventi:
                                        </div>
                                        <div class="code-block">
                                            <code>T=0ms   ‚Üí jQuery crea la struttura DOM (layer PDF + layer interactive)
T=10ms  ‚Üí Vengono iniettati i link cliccabili nel layer interactive
T=50ms  ‚Üí PDF.js inizia il rendering asincrono del Canvas
T=200ms ‚Üí Canvas completo, viene fatto appendChild() nel layer PDF
T=210ms ‚Üí ‚ö†Ô∏è BUG: appendChild() sovrascrive tutto il contenuto precedente!</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Manifestazione Visiva</div>
                                        <div class="step-description">
                                            L'utente vedeva i link cliccabili per ~200ms (lampeggio verde), poi improvvisamente sparivano. Cliccando sulle aree dove erano apparsi, non succedeva nulla. I click events erano completamente persi.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Click Event Blackhole</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Perdita dei Listener</div>
                                        <div class="step-description">
                                            jQuery attacca gli event listener (<code>onClick</code>) ai nodi DOM al momento della loro creazione. Quando questi nodi vengono rimossi dal DOM (anche temporaneamente), i listener vengono garbage-collected e persi per sempre.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">innerHTML Side Effects</div>
                                        <div class="step-description">
                                            Il codice iniziale usava <code>container.innerHTML = ''</code> per pulire il container prima di iniettare il Canvas. Questa operazione cancella brutalmente tutto, inclusi i layer che non avrebbero dovuto essere toccati.
                                        </div>
                                        <div class="code-block">
                                            <code>// ‚ùå PERICOLOSO
container.innerHTML = ''; // Cancella TUTTO
container.appendChild(canvas); // Ri-aggiunge solo il canvas</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Debug Process</div>
                                        <div class="step-description">
                                            Utilizzo di Chrome DevTools ‚Üí Timeline per visualizzare l'ordine cronologico delle manipolazioni DOM. Questo ha rivelato che il layer interattivo veniva creato PRIMA del canvas ma distrutto DURANTE l'appendChild del canvas.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>DOM Overwrite Pattern</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Separazione Fisica dei Layer</div>
                                        <div class="step-description">
                                            Decisione architettonica di creare due container DOM completamente indipendenti, ciascuno con responsabilit√† ben definite:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;div class="page"&gt;
  &lt;div class="layer-pdf"&gt;
    &lt;!-- Solo Canvas renderizzato da PDF.js --&gt;
  &lt;/div&gt;
  &lt;div class="layer-interactive"&gt;
    &lt;!-- Solo elementi UI (link, button) --&gt;
  &lt;/div&gt;
&lt;/div&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Z-Index Stacking Context</div>
                                        <div class="step-description">
                                            Utilizzo della propriet√† CSS <code>z-index</code> per sovrapporre visualmente i layer mantenendoli fisicamente separati nel DOM:
                                        </div>
                                        <div class="code-block">
                                            <code>.layer-pdf {
  position: absolute;
  z-index: 1; /* Sfondo */
}

.layer-interactive {
  position: absolute;
  z-index: 10; /* Primo piano */
  pointer-events: none; /* Trasparente ai click */
}

.layer-interactive * {
  pointer-events: auto; /* Ma i figli ricevono click */
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Garantire l'Atomicit√†</div>
                                        <div class="step-description">
                                            Modificando solo <code>.layer-pdf</code> durante il rendering, garantiamo che <code>.layer-interactive</code> rimanga intatto. Il rendering PDF diventa un'operazione atomica che non ha side-effects sul resto della UI.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FASE 1.5 -->
            <div class="card critical" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Fase 1.5: The Phantom Coordinate Bug</h3>
                    </div>
                    <span class="badge logic">Math Error</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Zoom Distortion con CSS Transform</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Approccio Iniziale Naive</div>
                                        <div class="step-description">
                                            La prima implementazione dello zoom usava CSS <code>transform: scale()</code> per ingrandire visivamente il flipbook:
                                        </div>
                                        <div class="code-block">
                                            <code>// ‚ùå APPROCCIO SBAGLIATO
#flipbook {
  transform: scale(1.5); // Zoom visuale al 150%
  transform-origin: center;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Il Problema delle Transform</div>
                                        <div class="step-description">
                                            Le CSS transforms sono operazioni puramente visuali che non modificano le propriet√† geometriche native del DOM. Un elemento con <code>width: 400px</code> e <code>scale(2)</code> rimane comunque 400px secondo il DOM, anche se visivamente appare 800px.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Impatto su Turn.js</div>
                                        <div class="step-description">
                                            Turn.js calcola le coordinate di flip basandosi su <code>element.offsetWidth</code> e <code>element.offsetHeight</code>. Questi valori NON riflettono le transform CSS, causando un disallineamento catastrofico tra rendering visuale e sistema di coordinate.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Click Mismatch - Il Bug Visuale</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Sintomo Visibile</div>
                                        <div class="step-description">
                                            L'utente vedeva la pagina ingrandita al 150%, ma cliccando sull'angolo in alto a destra (dove ci si aspetta il flip), non succedeva nulla. Cliccando invece 50px pi√π in basso e a sinistra, la pagina girava. Le hotzone erano "traslate" rispetto alla posizione visuale.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Root Cause Analysis</div>
                                        <div class="step-description">
                                            Quando l'utente clicca, il browser riporta coordinate <code>event.clientX / clientY</code> nello spazio visuale (post-transform). Turn.js per√≤ confronta queste coordinate con i bounding box nel DOM space (pre-transform). Matematicamente:
                                        </div>
                                        <div class="code-block">
                                            <code>// Coordinate cliccate (visual space)
clickX = 600px, clickY = 50px

// Bounding box effettivo (DOM space)
element.offsetWidth = 400px (non 600px!)
element.offsetHeight = 300px

// Turn.js controlla: clickX > offsetWidth?
// 600 > 400 ‚úì ‚Üí Erroneamente interpreta come "click fuori area"</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Edge Case: Zoom Dinamico</div>
                                        <div class="step-description">
                                            Il bug si amplificava quando l'utente cambiava lo zoom pinch-to-zoom su mobile. Ogni livello di zoom aggiungeva un ulteriore layer di disallineamento, rendendo la rivista completamente inutilizzabile.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Transform Matrix Hell</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Come Funzionano le CSS Transforms</div>
                                        <div class="step-description">
                                            Le transform CSS sono rappresentate internamente come matrici 3x3 (2D) o 4x4 (3D). Il browser applica queste matrici ai pixel durante il rendering, ma il DOM rimane invariato.
                                        </div>
                                        <div class="code-block">
                                            <code>transform: scale(1.5) translate(10px, 20px) rotate(5deg);

// Internamente diventa una matrice:
[ 1.5  0    10 ]
[ 0    1.5  20 ]
[ 0    0    1  ]</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Impossibilit√† di Reverse Engineering</div>
                                        <div class="step-description">
                                            Non esiste un metodo nativo JavaScript per "leggere" le transform CSS e convertirle in dimensioni reali. Tecnicamente si potrebbe usare <code>getComputedStyle()</code> e parsare la matrice, ma √® fragile e non affidabile cross-browser.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Decisione: Eliminare le Transform</div>
                                        <div class="step-description">
                                            Invece di combattere con le matrici, √® stato deciso di abbandonare completamente <code>transform: scale()</code> e implementare un ridimensionamento nativo che modifichi effettivamente le propriet√† DOM <code>width</code> e <code>height</code>.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Soluzione: Mathematical Resizing</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Algoritmo di Resize Proporzionale</div>
                                        <div class="step-description">
                                            Sviluppo di una funzione JavaScript che calcola le dimensioni target mantenendo l'aspect ratio e chiamando il metodo nativo <code>turn('size', w, h)</code>:
                                        </div>
                                        <div class="code-block">
                                            <code>function updateLayout() {
  const pageRatio = 0.7058; // A4 portrait
  const availW = $(window).width() * 0.95;
  const availH = $(window).height() * 0.95;
  
  let targetW, targetH;
  
  if (availW / availH > pageRatio) {
    // Viewport √® pi√π largo del necessario
    targetH = availH;
    targetW = targetH * pageRatio;
  } else {
    // Viewport √® pi√π alto del necessario
    targetW = availW;
    targetH = targetW / pageRatio;
  }
  
  // ‚úÖ Modifica REALE delle dimensioni DOM
  fb.turn('size', targetW, targetH);
  fb.css({ width: targetW, height: targetH });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi della Soluzione</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Coerenza DOM-Visual:</strong> <code>offsetWidth === visualWidth</code></li>
                                                <li><strong>Click Accuracy:</strong> Le coordinate click corrispondono perfettamente alle hotzone</li>
                                                <li><strong>Cross-Browser:</strong> Non dipende da quirks delle transform CSS</li>
                                                <li><strong>Performance:</strong> Nessun overhead di matrice da calcolare</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Responsive Recalculation</div>
                                        <div class="step-description">
                                            Implementazione di debounce sul resize event per ricalcolare le dimensioni solo quando l'utente finisce di ridimensionare la finestra:
                                        </div>
                                        <div class="code-block">
                                            <code>$(window).resize(function() {
  clearTimeout(window.resizedFinished);
  window.resizedFinished = setTimeout(updateLayout, 100);
});</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Questo previene centinaia di ricalcoli durante il drag della finestra, migliorando drasticamente le performance.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üü¢ FASE 2: Architecture Solutions - Implementazione</h2>

        <div class="timeline">
            
            <!-- SOLUZIONE 2.1 -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.1: Vector Injection (PDF.js)</h3>
                    </div>
                    <span class="badge solution">Core Rendering</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Mozilla PDF.js Integration</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cos'√® PDF.js?</div>
                                        <div class="step-description">
                                            PDF.js √® una libreria open-source sviluppata da Mozilla che permette il rendering di file PDF direttamente nel browser usando Canvas HTML5 e JavaScript. Non richiede plugin esterni (Flash, Adobe Reader) ed √® completamente cross-platform.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Installazione via CDN</div>
                                        <div class="step-description">
                                            Utilizzo di CDN pubblico (CDNJS) per caricare la libreria senza aumentare il peso della repository:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  pdfjsLib.GlobalWorkerOptions.workerSrc = 
    'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
&lt;/script&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Rendering Workflow</div>
                                        <div class="step-description">
                                            Il processo di rendering segue questi step:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Caricamento PDF come ArrayBuffer</li>
                                                <li>Parsing della struttura PDF (font, immagini, vector graphics)</li>
                                                <li>Creazione viewport con scala desiderata</li>
                                                <li>Rendering su Canvas HTML5</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Rendering Canvas con Scala 2.5x</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Scelta del Fattore di Scala</div>
                                        <div class="step-description">
                                            Il fattore 2.5 √® stato scelto empiricamente come sweet spot tra qualit√† e performance:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Scale 1.0:</strong> Qualit√† base, pixelato su Retina</li>
                                                <li><strong>Scale 2.5:</strong> ‚úÖ Nitido su tutti i display, file leggero</li>
                                                <li><strong>Scale 4.0:</strong> Overkill, Canvas troppo grande (memory crash su mobile)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Implementazione del Rendering</div>
                                        <div class="step-description">
                                            Funzione asincrona che renderizza ogni pagina PDF:
                                        </div>
                                        <div class="code-block">
                                            <code>async function renderPage(pageNum, container) {
  const url = pageNum + '.pdf';
  const loadingTask = pdfjsLib.getDocument(url);
  const pdf = await loadingTask.promise;
  const page = await pdf.getPage(1);
  
  const viewport = page.getViewport({ scale: 2.5 });
  const canvas = document.createElement('canvas');
  const context = canvas.getContext('2d');
  
  canvas.width = viewport.width;
  canvas.height = viewport.height;
  
  container.appendChild(canvas);
  await page.render({ 
    canvasContext: context, 
    viewport: viewport 
  }).promise;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Retina Display Optimization</div>
                                        <div class="step-description">
                                            I display Retina (iPhone, MacBook Pro) hanno <code>devicePixelRatio</code> di 2 o 3. Il rendering a scale 2.5 garantisce che anche su questi schermi ad alta densit√† il testo rimanga nitido, poich√© 2.5 > 2.0 (Retina @2x).
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Web Workers Architecture</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Perch√© i Web Workers?</div>
                                        <div class="step-description">
                                            Il parsing di un PDF √® computazionalmente intensivo (decompressione stream, rendering font, calcolo curve). Eseguirlo nel main thread bloccherebbe l'UI, causando freeze dell'interfaccia.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Background Processing</div>
                                        <div class="step-description">
                                            PDF.js utilizza automaticamente un Web Worker (<code>pdf.worker.min.js</code>) per parsare il PDF in un thread separato. Il main thread rimane responsivo e pu√≤ gestire le animazioni di Turn.js senza lag.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Message Passing</div>
                                        <div class="step-description">
                                            La comunicazione tra main thread e worker avviene tramite <code>postMessage()</code>. Il worker riceve il PDF, lo processa, e restituisce i dati renderizzati che vengono disegnati sul Canvas nel main thread.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Lossless Scaling</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Rendering Vettoriale On-The-Fly</div>
                                        <div class="step-description">
                                            A differenza dei formati raster, il PDF contiene istruzioni vettoriali (es. "disegna una linea da (0,0) a (100,100)"). PDF.js interpreta queste istruzioni e le rasterizza al livello di zoom richiesto, garantendo qualit√† perfetta a qualsiasi scala.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Font Embedding</div>
                                        <div class="step-description">
                                            I PDF embedded contengono i font come subset (solo i glifi utilizzati). PDF.js estrae questi font e li renderizza usando le API Canvas native del browser, garantendo che il testo appaia identico all'originale.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Vantaggi vs Raster</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>File Size:</strong> PDF 24 pagine = ~8 MB, PNG equivalenti = ~50 MB</li>
                                                <li><strong>Scalabilit√†:</strong> Infinita senza perdita qualit√†</li>
                                                <li><strong>Accessibilit√†:</strong> Testo selezionabile e copiabile</li>
                                                <li><strong>SEO:</strong> Contenuto indicizzabile dai motori di ricerca</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SOLUZIONE 2.2 -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.2: Layered DOM Architecture</h3>
                    </div>
                    <span class="badge solution">Stability</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Z-Index Separation Strategy</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Principio di Separazione delle Responsabilit√†</div>
                                        <div class="step-description">
                                            L'architettura divide logicamente il rendering (PDF Canvas) dall'interazione (link, button). Ogni layer ha un singolo scopo ben definito, seguendo il principio Single Responsibility del design pattern SOLID.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Struttura DOM Implementata</div>
                                        <div class="step-description">
                                            Ogni pagina √® composta da due container fratelli (siblings):
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;div class="page" id="p3"&gt;
  &lt;!-- Layer 1: Rendering (Z-Index 1) --&gt;
  &lt;div class="layer-pdf"&gt;
    &lt;canvas class="pdf-canvas"&gt;&lt;/canvas&gt;
  &lt;/div&gt;
  
  &lt;!-- Layer 2: Interaction (Z-Index 10) --&gt;
  &lt;div class="layer-interactive"&gt;
    &lt;div class="index-link" data-target="4"&gt;&lt;/div&gt;
    &lt;div class="index-link" data-target="5"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">CSS Z-Index Stacking Context</div>
                                        <div class="step-description">
                                            Il CSS posiziona i layer in modo assoluto e li sovrappone tramite z-index:
                                        </div>
                                        <div class="code-block">
                                            <code>.layer-pdf {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 1; /* Sfondo */
}

.layer-interactive {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 10; /* Primo piano */
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Layer PDF (Z-1) - Rendering Only</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Responsabilit√† del Layer</div>
                                        <div class="step-description">
                                            Questo layer si occupa esclusivamente di contenere il Canvas renderizzato da PDF.js o i video MP4 (per le pagine 22-23). Non gestisce alcun evento mouse/touch.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Injection del Canvas</div>
                                        <div class="step-description">
                                            Quando PDF.js completa il rendering, il Canvas viene iniettato in questo container:
                                        </div>
                                        <div class="code-block">
                                            <code>const pdfLayer = $('.layer-pdf')[0];
const canvas = document.createElement('canvas');
// ... configurazione canvas
pdfLayer.appendChild(canvas); // ‚úÖ Sicuro, non tocca layer-interactive</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Isolamento degli Eventi</div>
                                        <div class="step-description">
                                            Il layer PDF non ha <code>pointer-events</code> custom, quindi riceve i click normalmente. Tuttavia, essendo a z-index inferiore, i click vengono intercettati prima dal layer interactive soprastante.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Layer Interactive (Z-10) - UI Controls</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Pointer Events Management</div>
                                        <div class="step-description">
                                            Il layer interactive ha una configurazione CSS particolare per permettere il "click-through":
                                        </div>
                                        <div class="code-block">
                                            <code>.layer-interactive {
  pointer-events: none; /* Il container √® trasparente ai click */
}

.layer-interactive * {
  pointer-events: auto; /* Ma i FIGLI ricevono i click */
}</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Questo permette al layer di essere "invisibile" eccetto dove ci sono effettivamente elementi interattivi.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Hotspot Injection</div>
                                        <div class="step-description">
                                            Gli hotspot dell'indice vengono iniettati dinamicamente solo sulla pagina 3:
                                        </div>
                                        <div class="code-block">
                                            <code>if (i === 3) {
  map.forEach((link) => {
    const hotspot = $('&lt;div class="index-link"&gt;&lt;/div&gt;').css({
      top: link.t + '%',
      left: link.l + '%',
      width: link.w + '%',
      height: link.h + '%'
    }).attr('data-target', link.p);
    
    interactiveLayer.append(hotspot);
  });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Event Delegation</div>
                                        <div class="step-description">
                                            I click sugli hotspot vengono gestiti tramite event delegation a livello document, garantendo che i listener sopravvivano a manipolazioni DOM:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '.index-link', function() {
  const targetPage = $(this).attr('data-target');
  fb.turn('page', targetPage);
});</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SOLUZIONE 2.3 -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.3: Mathematical Resizing Engine</h3>
                    </div>
                    <span class="badge solution">Core Fix</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Geometric Calculation Algorithm</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Definizione dell'Aspect Ratio</div>
                                        <div class="step-description">
                                            Il formato A4 portrait (tipico delle riviste) ha ratio larghezza/altezza di 0.7058 (210mm / 297mm). Questo valore √® hardcoded come costante:
                                        </div>
                                        <div class="code-block">
                                            <code>const pageRatio = 0.7058; // A4 portrait standard</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Viewport Available Space</div>
                                        <div class="step-description">
                                            Calcolo dello spazio disponibile lasciando un margine del 5% per evitare che il flipbook tocchi i bordi dello schermo:
                                        </div>
                                        <div class="code-block">
                                            <code>const availW = $(window).width() * 0.95;
const availH = $(window).height() * 0.95;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Fit Algorithm - Aspect Ratio Preservation</div>
                                        <div class="step-description">
                                            L'algoritmo determina se il vincolo √® l'altezza o la larghezza:
                                        </div>
                                        <div class="code-block">
                                            <code>let targetW, targetH;

if (isSingleMode) {
  // Pagina singola
  if (availW / availH > pageRatio) {
    // Viewport √® pi√π LARGO del necessario ‚Üí vincola l'altezza
    targetH = availH;
    targetW = targetH * pageRatio;
  } else {
    // Viewport √® pi√π STRETTO ‚Üí vincola la larghezza
    targetW = availW;
    targetH = targetW / pageRatio;
  }
} else {
  // Doppia pagina (ratio x2)
  const doubleRatio = pageRatio * 2;
  // ... stesso algoritmo con doubleRatio
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Turn.js Native Resizing API</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Metodo turn('size')</div>
                                        <div class="step-description">
                                            Turn.js espone un'API pubblica per ridimensionare il flipbook. Questo metodo ricalcola internamente tutte le geometrie (hotzone di flip, shadow, perspective):
                                        </div>
                                        <div class="code-block">
                                            <code>fb.turn('size', targetW, targetH);</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Sincronizzazione CSS</div>
                                        <div class="step-description">
                                            Oltre a chiamare l'API Turn.js, dobbiamo sincronizzare anche le propriet√† CSS native per garantire coerenza:
                                        </div>
                                        <div class="code-block">
                                            <code>fb.css({ 
  width: targetW, 
  height: targetH 
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Differenza con CSS Transform</div>
                                        <div class="step-description">
                                            Chiamando <code>turn('size')</code>, le dimensioni DOM cambiano REALMENTE:
                                            <ul style="margin-top: 10px;">
                                                <li><code>element.offsetWidth</code> riflette il nuovo valore</li>
                                                <li><code>getBoundingClientRect()</code> ritorna le dimensioni corrette</li>
                                                <li>Le coordinate click corrispondono alle hitbox</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Responsive Recalculation con Debounce</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Problema del Resize Continuo</div>
                                        <div class="step-description">
                                            L'evento <code>window.resize</code> viene triggerato centinaia di volte al secondo quando l'utente ridimensiona la finestra. Ricalcolare il layout ad ogni evento causerebbe:
                                            <ul style="margin-top: 10px;">
                                                <li>CPU spike al 100%</li>
                                                <li>Animazioni stutter</li>
                                                <li>Battery drain su mobile</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Debounce Pattern Implementation</div>
                                        <div class="step-description">
                                            Implementazione di debounce: il ricalcolo viene eseguito solo 100ms DOPO che l'utente ha finito di ridimensionare:
                                        </div>
                                        <div class="code-block">
                                            <code>$(window).resize(function() {
  clearTimeout(window.resizedFinished);
  window.resizedFinished = setTimeout(updateLayout, 100);
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Vantaggi del Debounce</div>
                                        <div class="step-description">
                                            Con questa tecnica, anche se l'utente trascina la finestra per 2 secondi (200 eventi resize), <code>updateLayout()</code> viene chiamato una sola volta alla fine, riducendo il carico CPU del 99%.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SOLUZIONE 2.4 -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.4: Dual-View Toggle System</h3>
                    </div>
                    <span class="badge solution">UX Enhancement</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Single/Double Page Mode Logic</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Modalit√† Singola Pagina</div>
                                        <div class="step-description">
                                            Nella modalit√† single, Turn.js mostra una pagina alla volta. Ottimale per lettura mobile portrait dove lo spazio orizzontale √® limitato.
                                        </div>
                                        <div class="code-block">
                                            <code>fb.turn('display', 'single');
// Mostra pagina 1, poi 2, poi 3...</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Modalit√† Doppia Pagina</div>
                                        <div class="step-description">
                                            Nella modalit√† double, Turn.js emula un libro aperto mostrando pagina sinistra + destra. Esperienza classica da desktop/tablet landscape.
                                        </div>
                                        <div class="code-block">
                                            <code>fb.turn('display', 'double');
// Mostra pagine (2,3), poi (4,5), poi (6,7)...</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Gestione Numeri Pagina</div>
                                        <div class="step-description">
                                            Turn.js gestisce automaticamente la logica: in modalit√† double, la pagina 1 (copertina) √® sempre mostrata da sola a destra, poi le pagine interne sono appaiate.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Auto-Detection Based on Viewport</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Breakpoint a 768px</div>
                                        <div class="step-description">
                                            Il valore 768px √® lo standard de-facto per distinguere mobile (phone/small tablet) da desktop:
                                        </div>
                                        <div class="code-block">
                                            <code>let isMobile = window.innerWidth < 768;
let isSingleMode = isMobile; // Auto-inferenza</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Perch√© 768px?</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li>iPhone 14 Pro Max (portrait): 430px wide</li>
                                                <li>iPad Mini (portrait): 744px wide</li>
                                                <li>iPad Pro (portrait): 1024px wide</li>
                                            </ul>
                                            768px cattura la maggior parte dei device mobile portrait.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Initialization Sequence</div>
                                        <div class="step-description">
                                            Al caricamento della pagina, la modalit√† viene impostata automaticamente:
                                        </div>
                                        <div class="code-block">
                                            <code>fb.turn({
  width: 1000, 
  height: 600,
  display: isSingleMode ? 'single' : 'double'
});

updateLayout(); // Calcola dimensioni corrette</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Manual Toggle Button</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Floating UI Button</div>
                                        <div class="step-description">
                                            Bottone circolare floating in alto a sinistra che permette il toggle manuale:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;div id="mode-btn" class="action-btn" title="Cambia Vista"&gt;
  üìñ
&lt;/div&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Click Handler</div>
                                        <div class="step-description">
                                            Al click, lo stato viene invertito e l'interfaccia ricalcolata:
                                        </div>
                                        <div class="code-block">
                                            <code>$('#mode-btn').click(function() {
  isSingleMode = !isSingleMode;
  updateLayout(); // Ricalcola tutto
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Visual Feedback</div>
                                        <div class="step-description">
                                            L'emoji del bottone cambia per comunicare la modalit√† corrente:
                                        </div>
                                        <div class="code-block">
                                            <code>function updateLayout() {
  modeBtn.text(isSingleMode ? 'üìÑ' : 'üìñ');
  // üìÑ = singola pagina, üìñ = libro aperto
  // ...
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>State Persistence Durante il Toggle</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Turn.js State Machine</div>
                                        <div class="step-description">
                                            Turn.js mantiene internamente lo stato della pagina corrente. Quando si cambia modalit√†, cerca di preservare la pagina visualizzata.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">View Recalculation</div>
                                        <div class="step-description">
                                            Dopo il cambio modalit√†, Turn.js ricalcola automaticamente quale pagina mostrare:
                                        </div>
                                        <div class="code-block">
                                            <code>// Utente √® a pagina 8 in modalit√† double (mostra 8-9)
// Click toggle ‚Üí modalit√† single
// Turn.js mostra pagina 8 singola, preservando il contesto</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">UX Smooth Transition</div>
                                        <div class="step-description">
                                            La transizione √® animata con duration 1000ms (1 secondo), dando all'utente tempo di capire il cambio di layout senza disorientamento.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SOLUZIONE 2.5 - GOLD -->
            <div class="card gold" onclick="toggleCard(this)" style="border-color: var(--accent-gold); border-width: 2px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.5: Multimedia Living Paper (AI Integration)</h3>
                    </div>
                    <span class="badge gold">AI Feature</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Video AI Generation con Google Veo</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cos'√® Google Veo?</div>
                                        <div class="step-description">
                                            Veo √® il modello AI di Google (parte dell'ecosistema Gemini) per la generazione di video da prompt testuali. Produce clip video MP4 ad alta qualit√† con risoluzione fino a 1080p.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Prompt Engineering per le Pagine 22-23</div>
                                        <div class="step-description">
                                            I prompt sono stati crafted per generare contenuti visivi che complementano il tema della rivista. Esempio:
                                        </div>
                                        <div class="code-block">
                                            <code>// Prompt per pagina 22
"Abstract visualization of technology and education merging, 
flowing particles representing knowledge transfer, 
warm color palette, cinematic lighting, 4K quality"</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Post-Processing e Ottimizzazione</div>
                                        <div class="step-description">
                                            I video generati da Veo vengono:
                                            <ul style="margin-top: 10px;">
                                                <li>Compressi con codec H.264 per compatibilit√† universale</li>
                                                <li>Ridimensionati al ratio A4 (0.7058) per match perfetto con le pagine</li>
                                                <li>Looped seamlessly (inizio/fine si collegano)</li>
                                                <li>Ottimizzati per <5MB file size (banda mobile)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Browser Autoplay Policy Bypass</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Problema delle Autoplay Policies</div>
                                        <div class="step-description">
                                            I browser moderni (Chrome 66+, Safari 11+) bloccano l'autoplay di video con audio per prevenire advertising invasivo e ridurre consumo batteria. La policy √®:
                                        </div>
                                        <div class="code-block">
                                            <code>// ‚ùå BLOCCATO
&lt;video autoplay&gt;
  &lt;source src="video.mp4"&gt;
&lt;/video&gt;

// "DOMException: play() failed because the user didn't interact"</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Muted Attribute - La Soluzione</div>
                                        <div class="step-description">
                                            I browser permettono autoplay di video MUTED (senza audio). Aggiungendo l'attributo <code>muted</code>, bypassiamo la restrizione:
                                        </div>
                                        <div class="code-block">
                                            <code>// ‚úÖ FUNZIONA
&lt;video playsinline webkit-playsinline loop muted&gt;
  &lt;source src="22.mp4" type="video/mp4"&gt;
&lt;/video&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Attributi Critici Spiegati</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>playsinline:</strong> Previene fullscreen automatico su iOS</li>
                                                <li><strong>webkit-playsinline:</strong> Supporto legacy per Safari vecchi</li>
                                                <li><strong>loop:</strong> Ripete il video infinitamente</li>
                                                <li><strong>muted:</strong> Disabilita audio ‚Üí abilita autoplay</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Smart Playback Control System</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Event Listener su "turned"</div>
                                        <div class="step-description">
                                            Turn.js emette l'evento <code>turned</code> ogni volta che l'utente sfoglia una pagina. Ci aggganciamo a questo evento per gestire i video:
                                        </div>
                                        <div class="code-block">
                                            <code>fb.bind("turned", function(event, page, view) {
  checkAndPlayVideos(view);
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Pause All, Then Play Visible</div>
                                        <div class="step-description">
                                            La funzione prima mette in pausa TUTTI i video, poi riavvia solo quelli nelle pagine visibili:
                                        </div>
                                        <div class="code-block">
                                            <code>function checkAndPlayVideos(view) {
  // Step 1: Pausa tutti i video
  $('video').each(function() { 
    this.pause(); 
  });
  
  // Step 2: Riavvia solo i visibili
  view.forEach(pageNum => {
    if (pageNum === 0) return; // Skip pagina vuota
    
    const vid = $('#p' + pageNum).find('video')[0];
    if (vid) {
      vid.currentTime = 0; // Reset a inizio
      vid.play().catch(e => {
        // Fallback se autoplay ancora bloccato
        vid.muted = true;
        vid.play();
      });
    }
  });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Perch√© Reset currentTime a 0?</div>
                                        <div class="step-description">
                                            Ogni volta che l'utente torna sulla pagina 22/23, il video riparte da capo. Questo garantisce un'esperienza coerente e previene che l'utente veda il video "a met√†" se torna indietro.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Performance e Battery Optimization</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Problema: Video in Background</div>
                                        <div class="step-description">
                                            Se i video continuassero a riprodursi anche quando non visibili, causerebbero:
                                            <ul style="margin-top: 10px;">
                                                <li>Consumo CPU inutile (decoding video frame)</li>
                                                <li>Battery drain su mobile (fino a 30% batteria/ora)</li>
                                                <li>Thermal throttling (device si scalda)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Pausa Proattiva</div>
                                        <div class="step-description">
                                            Mettendo in pausa i video non visibili, il browser pu√≤:
                                            <ul style="margin-top: 10px;">
                                                <li>Liberare decoder hardware (GPU)</li>
                                                <li>Interrompere il fetch dei frame dal file</li>
                                                <li>Ridurre consumo CPU dal 40% allo 0.5%</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Mobile-First Consideration</div>
                                        <div class="step-description">
                                            Su mobile, ogni millisecondo di CPU conta. La strategia "pause when hidden" √® essenziale per mantenere la batteria duratura e il device fresco, specialmente durante sessioni di lettura lunghe (15-20 minuti).
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- SOLUZIONE 2.6 - DYNAMIC CONTENT ROUTER -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Soluzione 2.6: Dynamic Content Router & Hybrid Architecture</h3>
                    </div>
                    <span class="badge solution">Smart Routing</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Loop Decisionale ("Traffic Director")</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Architettura a 3 Vie</div>
                                        <div class="step-description">
                                            Invece di trattare tutte le pagine uniformemente (approccio naive), il sistema implementa un router intelligente che smista ogni pagina verso il renderer appropriato:
                                        </div>
                                        <div class="code-block">
                                            <code>for (let i = 1; i <= totalPages; i++) {
  if (i === 25) {
    // Route 1: HTML Generator
    // Genera pagina CTA direttamente in DOM
  } else if (i === 22 || i === 23 || i === 24) {
    // Route 2: Video Player
    // Inietta video MP4 con autoplay policy
  } else {
    // Route 3: PDF Renderer
    // Usa PDF.js per rendering Canvas
  }
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi del Pattern Decisionale</div>
                                        <div class="step-description">
                                            Questo approccio "if-else-if" agisce come un vigile urbano del traffico:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Performance:</strong> Evita tentativi di fetch di file inesistenti (25.pdf)</li>
                                                <li><strong>Flessibilit√†:</strong> Ogni tipo di contenuto usa il renderer ottimale</li>
                                                <li><strong>Scalabilit√†:</strong> Facile aggiungere nuove route (es. pagine interactive)</li>
                                                <li><strong>Debugging:</strong> Chiara separazione delle responsabilit√†</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Estensibilit√† Futura</div>
                                        <div class="step-description">
                                            Il pattern √® facilmente estendibile per nuove tipologie:
                                        </div>
                                        <div class="code-block">
                                            <code>// Esempio: Aggiungere pagina quiz interattiva
if (i === 30) {
  renderInteractiveQuiz(pdfLayer);
} else if (i === 35) {
  renderInfographicSVG(pdfLayer);
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Pagina 25: HTML In-Memory ("Ghost Page")</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Template Literal Injection</div>
                                        <div class="step-description">
                                            La pagina 25 non esiste come file fisico. Viene generata runtime tramite Template Literals ES6:
                                        </div>
                                        <div class="code-block">
                                            <code>if (i === 25) {
  pdfLayer.append(`
    &lt;div class="end-page-content"&gt;
      &lt;div class="end-title"&gt;Grazie per la lettura!&lt;/div&gt;
      &lt;div class="end-text"&gt;
        Il CamaLEOnte √® un progetto in continua evoluzione.&lt;br&gt;
        Se la rivista ti √® piaciuta, lasciaci un like...
      &lt;/div&gt;
      &lt;div class="cta-container"&gt;
        &lt;button class="cta-btn btn-like" id="like-btn"&gt;
          ‚ù§Ô∏è Like &lt;span class="like-count"&gt;...&lt;/span&gt;
        &lt;/button&gt;
        &lt;button class="cta-btn btn-share"&gt;üöÄ Condividi&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `);
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi dell'Approccio In-Memory</div>
                                        <div class="step-description">
                                            Generare HTML direttamente invece di usare PDF/Video offre:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Peso Zero:</strong> 0 KB di download, rendering istantaneo</li>
                                                <li><strong>Dinamicit√†:</strong> Contenuto aggiornabile runtime (contatore like)</li>
                                                <li><strong>Interattivit√† Nativa:</strong> Button HTML5 con event listener</li>
                                                <li><strong>A11y:</strong> Screen reader compatibile (impossibile con PDF)</li>
                                                <li><strong>SEO:</strong> Testo indicizzabile dai motori di ricerca</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Design System Integration</div>
                                        <div class="step-description">
                                            Il CSS della pagina CTA usa lo stesso design system del resto dell'app:
                                        </div>
                                        <div class="code-block">
                                            <code>.end-page-content {
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  /* Gradiente coerente con overlay tutorial */
}

.cta-btn {
  border-radius: 50px; /* Match con start-btn tutorial */
  font-weight: bold; /* Consistency */
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  /* Easing curve avanzata per micro-interactions */
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Video Multi-Page Expansion (Pag. 24)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Scaling della Strategia Video</div>
                                        <div class="step-description">
                                            La logica video √® stata estesa da 2 pagine (22-23) a 3 pagine (22-23-24):
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE: Solo 2 pagine
if (i === 22 || i === 23) { ... }

// AFTER: 3 pagine video
if (i === 22 || i === 23 || i === 24) {
  const videoSrc = i + ".mp4";
  pdfLayer.append(`
    &lt;video class="magazine-video" playsinline webkit-playsinline loop muted&gt;
      &lt;source src="${videoSrc}" type="video/mp4"&gt;
    &lt;/video&gt;
  `);
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Performance Consideration</div>
                                        <div class="step-description">
                                            Con 3 video simultanei, il controllo proattivo della riproduzione diventa critico:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Memory:</strong> 3 video decodificati = ~150-300 MB RAM</li>
                                                <li><strong>CPU:</strong> Decoding multiplo pu√≤ causare frame drop</li>
                                                <li><strong>Soluzione:</strong> La funzione <code>checkAndPlayVideos()</code> pausa aggressivamente i video hidden</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Lazy Loading Strategy</div>
                                        <div class="step-description">
                                            I browser moderni implementano lazy loading nativo per i video. Il browser non scarica 24.mp4 finch√© non ti avvicini alla pagina 24, risparmiando banda.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Hybrid Architecture Benefits</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Best of All Worlds</div>
                                        <div class="step-description">
                                            L'architettura ibrida combina i punti di forza di ogni tecnologia:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Canvas (PDF.js):</strong> Qualit√† vettoriale, testo selezionabile</li>
                                                <li><strong>Video (MP4):</strong> Contenuti animati, engagement visivo</li>
                                                <li><strong>DOM (HTML):</strong> Interattivit√† nativa, dinamicit√† runtime</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">GPU Acceleration Optimization</div>
                                        <div class="step-description">
                                            Ogni renderer sfrutta diversi percorsi hardware:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Canvas:</strong> GPU rasterization via WebGL backend</li>
                                                <li><strong>Video:</strong> Hardware video decoder (NVDEC su NVIDIA, VCE su AMD)</li>
                                                <li><strong>DOM:</strong> Compositor thread per smooth scrolling</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Complexity Trade-off</div>
                                        <div class="step-description">
                                            Il prezzo da pagare √® complessit√† architetturale: 3 renderer diversi = 3 punti di failure potenziali. Ma i benefici UX superano largamente i rischi di manutenzione.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üü£ FASE 3: Infrastructure & Operations</h2>

        <div class="timeline">

            <!-- INFRA 3.1 - CI/CD -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Infra 3.1: CI/CD Pipeline & Hosting</h3>
                    </div>
                    <span class="badge infrastructure">DevOps</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>GitHub Pages Deployment</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cos'√® GitHub Pages?</div>
                                        <div class="step-description">
                                            GitHub Pages √® un servizio di hosting statico gratuito integrato in GitHub. Permette di servire siti web HTML/CSS/JS direttamente da una repository Git, con deploy automatico ad ogni push.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Configurazione Repository</div>
                                        <div class="step-description">
                                            La repository √® configurata per servire il branch <code>main</code> come source:
                                        </div>
                                        <div class="code-block">
                                            <code>Settings ‚Üí Pages ‚Üí Source: main branch
URL generato: https://[username].github.io/ilcamaleonte/</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Workflow di Deploy</div>
                                        <div class="step-description">
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Developer fa modifiche in locale</li>
                                                <li><code>git add . && git commit -m "update"</code></li>
                                                <li><code>git push origin main</code></li>
                                                <li>GitHub Actions triggera build automatica</li>
                                                <li>Il sito viene deployato in 30-60 secondi</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Version Control e Rollback</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Git History come Safety Net</div>
                                        <div class="step-description">
                                            Ogni commit √® tracciato permanentemente. In caso di regressione critica, √® possibile fare rollback istantaneo:
                                        </div>
                                        <div class="code-block">
                                            <code>git log --oneline  # Vedi history
git revert HEAD    # Annulla ultimo commit
git push           # Deploy della versione precedente</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Branching Strategy</div>
                                        <div class="step-description">
                                            Per feature sperimentali, si usa il pattern feature-branch:
                                            <ul style="margin-top: 10px;">
                                                <li><code>main</code>: Production stabile</li>
                                                <li><code>feature/video-ai</code>: Sviluppo nuove feature</li>
                                                <li>Merge in <code>main</code> solo dopo testing</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Disaster Recovery</div>
                                        <div class="step-description">
                                            GitHub mantiene backup ridondanti su datacenter globali. La probabilit√† di perdita dati √® praticamente zero (99.99% uptime SLA).
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Global CDN e Performance</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Edge Caching Strategy</div>
                                        <div class="step-description">
                                            GitHub Pages usa Fastly CDN con edge servers distribuiti globalmente. Quando un utente italiano accede al sito, il contenuto viene servito da un server in Europa, non dagli USA.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Latency Reduction</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Senza CDN:</strong> Latenza 200-300ms (USA ‚Üí Italia)</li>
                                                <li><strong>Con Fastly CDN:</strong> Latenza 20-50ms (Edge EU ‚Üí Italia)</li>
                                                <li><strong>Miglioramento:</strong> 6x pi√π veloce</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">SSL/HTTPS Automatico</div>
                                        <div class="step-description">
                                            GitHub Pages fornisce certificati SSL gratuiti via Let's Encrypt, garantendo connessioni sicure e requisito per PWA future.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- INFRA 3.2 - ANALYTICS -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Infra 3.2: Analytics & Monitoring</h3>
                    </div>
                    <span class="badge infrastructure">Data</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Google Analytics 4 Integration</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Setup e Configurazione</div>
                                        <div class="step-description">
                                            Google Analytics 4 (GA4) viene integrato tramite snippet JavaScript nel <code>&lt;head&gt;</code>:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXX"&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXX');
&lt;/script&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Metriche Automatiche Tracciate</div>
                                        <div class="step-description">
                                            GA4 traccia automaticamente:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>page_view:</strong> Ogni caricamento pagina</li>
                                                <li><strong>session_start:</strong> Inizio nuova sessione utente</li>
                                                <li><strong>first_visit:</strong> Primo accesso ever</li>
                                                <li><strong>scroll:</strong> Profondit√† scroll (25%, 50%, 75%, 100%)</li>
                                                <li><strong>video_start/complete:</strong> Interazioni video</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Privacy Compliance</div>
                                        <div class="step-description">
                                            GA4 √® configurato con IP anonymization e cookie consent per GDPR compliance, rispettando le normative europee sulla privacy.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Custom Event Tracking</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Eventi Custom Implementati</div>
                                        <div class="step-description">
                                            Eventi personalizzati per tracciare comportamenti specifici:
                                        </div>
                                        <div class="code-block">
                                            <code>// Cambio pagina
fb.bind("turned", function(event, page) {
  gtag('event', 'page_turn', {
    'page_number': page,
    'display_mode': isSingleMode ? 'single' : 'double'
  });
});

// Toggle vista
$('#mode-btn').click(function() {
  gtag('event', 'view_toggle', {
    'from_mode': isSingleMode ? 'single' : 'double',
    'to_mode': !isSingleMode ? 'single' : 'double'
  });
});

// Click indice
$(document).on('click', '.index-link', function() {
  gtag('event', 'index_click', {
    'target_page': $(this).attr('data-target')
  });
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Insights Ottenibili</div>
                                        <div class="step-description">
                                            Con questi eventi, possiamo rispondere a domande come:
                                            <ul style="margin-top: 10px;">
                                                <li>Quali pagine vengono lette di pi√π?</li>
                                                <li>Gli utenti preferiscono single o double page?</li>
                                                <li>Quanti utenti navigano via indice vs sfogliamento?</li>
                                                <li>Qual √® il tempo medio di permanenza?</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Device Segmentation Analysis</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Dimensioni Tracciate</div>
                                        <div class="step-description">
                                            GA4 segmenta automaticamente gli utenti per:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Device Category:</strong> Mobile, Desktop, Tablet</li>
                                                <li><strong>Operating System:</strong> iOS, Android, Windows, macOS</li>
                                                <li><strong>Browser:</strong> Chrome, Safari, Firefox, Edge</li>
                                                <li><strong>Screen Resolution:</strong> Per ottimizzazione responsive</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Data-Driven Decisions</div>
                                        <div class="step-description">
                                            Esempio: se scopriamo che il 70% degli utenti √® su mobile, possiamo:
                                            <ul style="margin-top: 10px;">
                                                <li>Ottimizzare ulteriormente la modalit√† single-page</li>
                                                <li>Ridurre dimensioni PDF per risparmiare banda mobile</li>
                                                <li>Testare gesture touch pi√π intuitive</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- INFRA 3.3 - SECURITY -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Infra 3.3: Security & Code Protection</h3>
                    </div>
                    <span class="badge security">Security</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Code Obfuscation</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Perch√© Offuscare?</div>
                                        <div class="step-description">
                                            L'offuscamento del codice JavaScript rende difficile:
                                            <ul style="margin-top: 10px;">
                                                <li>Reverse engineering della logica di business</li>
                                                <li>Copia del codice per progetti concorrenti</li>
                                                <li>Identificazione di vulnerabilit√† di sicurezza</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Tecniche Applicate</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Minification:</strong> Rimozione whitespace e commenti</li>
                                                <li><strong>Variable Renaming:</strong> <code>pageNumber</code> ‚Üí <code>a</code></li>
                                                <li><strong>String Encoding:</strong> Stringhe trasformate in esadecimale</li>
                                                <li><strong>Control Flow Flattening:</strong> Ristrutturazione logica condizionali</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Disclaimer</div>
                                        <div class="step-description">
                                            L'offuscamento NON √® crittografia. Un esperto pu√≤ comunque deobfuscare il codice, ma richiede tempo e skill significativi. Serve a proteggere da casual copying, non da attacchi determinati.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Client-Side Protection Measures</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Disable Right-Click</div>
                                        <div class="step-description">
                                            Previene il download facile di immagini via context menu:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;body oncontextmenu="return false;"&gt;</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Nota: Bypassabile con F12, ma scoraggia l'utente medio.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">DevTools Detection</div>
                                        <div class="step-description">
                                            Blocca la scorciatoia F12 e combinazioni Ctrl+Shift+I:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;body onkeydown="return (event.keyCode != 123 && 
                                       !event.ctrlKey && 
                                       !event.shiftKey)"&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">User-Select Disable</div>
                                        <div class="step-description">
                                            Previene selezione e copia del testo:
                                        </div>
                                        <div class="code-block">
                                            <code>* {
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Effectiveness Realt√†</div>
                                        <div class="step-description">
                                            Queste misure sono **deterrenti**, non soluzioni assolute. Un utente esperto pu√≤ comunque:
                                            <ul style="margin-top: 10px;">
                                                <li>Aprire DevTools da menu browser</li>
                                                <li>Usare estensioni per scaricare risorse</li>
                                                <li>Screenshottare il contenuto</li>
                                            </ul>
                                            L'obiettivo √® alzare la soglia di difficolt√† per l'utente medio, non bloccare l'hacking professionale.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- INFRA 3.4 - DISTRIBUTION -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Infra 3.4: Distribution Strategy</h3>
                    </div>
                    <span class="badge infrastructure">Marketing</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>QR Code Generation e Deployment</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Generazione QR Code</div>
                                        <div class="step-description">
                                            Utilizzo di servizi online (es. qr-code-generator.com) per creare QR code dell'URL finale:
                                        </div>
                                        <div class="code-block">
                                            <code>URL: https://ilcamaleonte.github.io/
Formato: PNG 1024x1024px
Error Correction: Level H (30% recupero danni)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Posizionamento Fisico</div>
                                        <div class="step-description">
                                            I QR code vengono stampati e posizionati in:
                                            <ul style="margin-top: 10px;">
                                                <li>Bacheca principale della scuola</li>
                                                <li>Aula magna (su poster dedicati)</li>
                                                <li>Biblioteca (desk accoglienza)</li>
                                                <li>Corridoi principali (versione A3)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Vantaggi del QR</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Zero Friction:</strong> Scan e vai, no URL da digitare</li>
                                                <li><strong>Mobile-First:</strong> Tutti hanno la camera</li>
                                                <li><strong>Trackable:</strong> Usando URL shortener, si pu√≤ tracciare quanti scan</li>
                                                <li><strong>Offline-to-Online Bridge:</strong> Connette mondo fisico e digitale</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Digital Distribution Channels</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Email Campaign</div>
                                        <div class="step-description">
                                            Newsletter inviata a mailing list studenti/docenti:
                                        </div>
                                        <div class="code-block">
                                            <code>Subject: üéâ Il CamaLEOnte √® Online!
Body: 
Cari studenti,
Siamo orgogliosi di presentare la versione digitale 
interattiva della nostra rivista scolastica.
Leggi ora ‚Üí [LINK]</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Social Media Strategy</div>
                                        <div class="step-description">
                                            Post organici su canali social della scuola:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Instagram:</strong> Carousel post con screenshots pagine</li>
                                                <li><strong>Facebook:</strong> Post pinned con link</li>
                                                <li><strong>WhatsApp:</strong> Broadcast a gruppi classe</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Website Integration</div>
                                        <div class="step-description">
                                            Embed widget o banner prominente sulla homepage sito scuola:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;iframe src="https://ilcamaleonte.github.io" 
        width="100%" height="600px"&gt;&lt;/iframe&gt;</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Future: Progressive Web App (PWA)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cos'√® una PWA?</div>
                                        <div class="step-description">
                                            Una Progressive Web App √® un sito web che pu√≤ essere "installato" come app nativa su smartphone/desktop, funzionando offline e con icona sulla home screen.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Roadmap PWA Implementation</div>
                                        <div class="step-description">
                                            Per trasformare il progetto in PWA servono:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>manifest.json:</strong> Metadati app (nome, icona, colori)</li>
                                                <li><strong>Service Worker:</strong> Cache PDF/asset per offline reading</li>
                                                <li><strong>HTTPS:</strong> ‚úÖ Gi√† presente via GitHub Pages</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Vantaggi PWA</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li>Icona home screen ‚Üí accesso 1-tap</li>
                                                <li>Offline reading ‚Üí no connessione richiesta</li>
                                                <li>Notifiche push ‚Üí alert nuovi numeri</li>
                                                <li>App-like UX ‚Üí fullscreen, no browser chrome</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- INFRA 3.5 - EXTERNAL API INTEGRATION -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Infra 3.5: External API Integration & Social Features</h3>
                    </div>
                    <span class="badge infrastructure">API</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Backend Invisibile (CountAPI Integration)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Il Problema del Sito Statico</div>
                                        <div class="step-description">
                                            GitHub Pages serve solo file statici (HTML/CSS/JS). Non ha database, non pu√≤ salvare dati utente, non pu√≤ contare i like. Ogni refresh della pagina "dimentica" tutto.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">CountAPI come Database Esterno</div>
                                        <div class="step-description">
                                            CountAPI (<code>countapi.xyz</code>) √® un servizio gratuito che offre un contatore persistente via REST API. Funziona come un database "cloud" accessibile tramite HTTP requests:
                                        </div>
                                        <div class="code-block">
                                            <code>// NAMESPACE per isolamento
const NAMESPACE = 'il-camaleonte-magazine-v1';
const KEY = 'likes';

// Endpoint API
GET  https://api.countapi.xyz/get/{namespace}/{key}
POST https://api.countapi.xyz/hit/{namespace}/{key}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Lettura (GET): Caricamento Iniziale</div>
                                        <div class="step-description">
                                            Al caricamento della pagina 25, facciamo una richiesta AJAX per leggere il contatore:
                                        </div>
                                        <div class="code-block">
                                            <code>$.getJSON(`https://api.countapi.xyz/get/${NAMESPACE}/${KEY}`, 
  function(response) {
    updateLikeDisplay(response.value || 0);
    // response.value = 42 (esempio)
  }
).fail(function() {
  $('#like-count').text("100+"); // Fallback se API bloccata
});</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            La richiesta √® asincrona e non blocca il rendering della pagina.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Scrittura (HIT): Incremento Like</div>
                                        <div class="step-description">
                                            Quando l'utente clicca il cuore, incrementiamo atomicamente il contatore:
                                        </div>
                                        <div class="code-block">
                                            <code>$.getJSON(`https://api.countapi.xyz/hit/${NAMESPACE}/${KEY}`, 
  function(response) {
    updateLikeDisplay(response.value);
    // Server ha fatto: counter++; return counter;
    btn.addClass('liked'); // Visual feedback
    localStorage.setItem('hasLikedCamaLeonte', 'true');
  }
);</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Protezione Anti-Spam (LocalStorage Guard)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Rischio Spam</div>
                                        <div class="step-description">
                                            Senza protezione, un utente potrebbe aprire la console e fare:
                                        </div>
                                        <div class="code-block">
                                            <code>// Attack script
for (let i = 0; i < 1000; i++) {
  $('#like-btn').click(); // 1000 like fake!
}</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Questo inquinerebbe il contatore globale.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Client-Side Cookie Guard</div>
                                        <div class="step-description">
                                            Prima di ogni API call, controlliamo il localStorage:
                                        </div>
                                        <div class="code-block">
                                            <code>$('#like-btn').click(function() {
  // GUARD: Controlla se ha gi√† likato
  if (localStorage.getItem('hasLikedCamaLeonte')) {
    alert("Hai gi√† messo like! Grazie per il supporto.");
    return; // Exit early
  }
  
  // Procedi con API call solo se NON ha gi√† likato
  $.getJSON(...);
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Limitazioni della Protezione</div>
                                        <div class="step-description">
                                            Il localStorage √® client-side, quindi:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Bypassabile:</strong> L'utente pu√≤ cancellare i cookies</li>
                                                <li><strong>Browser-Specific:</strong> Chrome e Firefox hanno localStorage separati</li>
                                                <li><strong>Non √® Security:</strong> √à un deterrente UX, non una protezione cryptografica</li>
                                            </ul>
                                            Per protezione seria servirebbe backend con rate limiting e IP tracking.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Graceful Degradation & Fallback</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Scenari di Failure</div>
                                        <div class="step-description">
                                            L'API esterna pu√≤ fallire per vari motivi:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>AdBlocker:</strong> Blocca richieste a domini esterni</li>
                                                <li><strong>Firewall:</strong> Scuole/aziende bloccano API non whitelisted</li>
                                                <li><strong>Downtime:</strong> CountAPI pu√≤ essere offline (99.9% uptime ‚â† 100%)</li>
                                                <li><strong>CORS:</strong> Policy browser potrebbero bloccare</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Fallback Strategy</div>
                                        <div class="step-description">
                                            Implementiamo fallback sia sul caricamento che sul click:
                                        </div>
                                        <div class="code-block">
                                            <code>// Caricamento: Se API fallisce
$.getJSON(...).fail(function() {
  $('#like-count').text("100+"); // Placeholder generico
});

// Click: Se API fallisce
$.getJSON(...).fail(function() {
  btn.addClass('liked'); // Visual feedback locale
  $('#like-count').text("101+"); // Incremento finto
  localStorage.setItem('hasLikedCamaLeonte', 'true');
});</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            L'utente riceve comunque feedback visivo anche se il server √® irraggiungibile.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Progressive Enhancement Philosophy</div>
                                        <div class="step-description">
                                            Il sistema segue il principio di Progressive Enhancement:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Base Layer:</strong> Rivista funziona senza API</li>
                                                <li><strong>Enhancement Layer:</strong> Like globale se API disponibile</li>
                                                <li><strong>Degradation:</strong> Fallback elegante se API non raggiungibile</li>
                                            </ul>
                                            Nessun broken state, sempre funzionante.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Web Share API Integration</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Native Share Sheet (Mobile)</div>
                                        <div class="step-description">
                                            La Web Share API usa il pannello di condivisione nativo del sistema operativo:
                                        </div>
                                        <div class="code-block">
                                            <code>$('#share-btn').click(function() {
  const shareData = {
    title: 'Il CamaLEOnte',
    text: 'Scopri il nuovo numero del Magazine Il CamaLEOnte!',
    url: window.location.href
  };

  if (navigator.share) {
    // Mobile: Apre sheet nativo (WhatsApp, Telegram, Email...)
    navigator.share(shareData).catch(console.error);
  } else {
    // Desktop fallback
  }
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Desktop Fallback (Clipboard API)</div>
                                        <div class="step-description">
                                            I PC spesso non hanno <code>navigator.share</code> implementato. Usiamo Clipboard API come piano B:
                                        </div>
                                        <div class="code-block">
                                            <code>if (navigator.share) {
  navigator.share(shareData);
} else {
  // Copia URL negli appunti
  navigator.clipboard.writeText(window.location.href);
  alert("Link copiato negli appunti!");
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Browser Support Matrix</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Mobile Chrome/Safari:</strong> ‚úÖ navigator.share nativo</li>
                                                <li><strong>Desktop Chrome:</strong> ‚ö†Ô∏è Solo se HTTPS + user gesture</li>
                                                <li><strong>Desktop Firefox:</strong> ‚ùå Non supportato ‚Üí Clipboard fallback</li>
                                                <li><strong>Safari macOS:</strong> ‚úÖ Supportato da macOS 12.3+</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üé® FASE 4: UX/UI Enhancements</h2>

        <div class="timeline">

            <!-- UX 4.1 - TUTORIAL -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>UX 4.1: Immersive Tutorial Overlay</h3>
                    </div>
                    <span class="badge solution">First-Time UX</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Glass-Morphism Design Language</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cos'√® il Glass-Morphism?</div>
                                        <div class="step-description">
                                            Trend di design caratterizzato da elementi semi-trasparenti con blur effect, che simulano l'aspetto del vetro satinato. Reso popolare da iOS e Windows 11.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Implementazione CSS</div>
                                        <div class="step-description">
                                            L'overlay tutorial usa backdrop-filter per ottenere l'effetto:
                                        </div>
                                        <div class="code-block">
                                            <code>#tutorial-overlay {
  background: rgba(5, 5, 5, 0.85); /* Semi-trasparente */
  backdrop-filter: blur(15px); /* Blur dello sfondo */
  -webkit-backdrop-filter: blur(15px); /* Safari */
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Card Glass Effect</div>
                                        <div class="step-description">
                                            Ogni card tutorial ha bordi sottili e sfondo trasparente:
                                        </div>
                                        <div class="code-block">
                                            <code>.glass-card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Animated Icons con CSS Keyframes</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Swipe Hand Animation</div>
                                        <div class="step-description">
                                            L'icona üëÜ oscilla left-right per simulare gesture di swipe:
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes swipeHand {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(-15px) rotate(-10deg); }
  75% { transform: translateX(15px) rotate(10deg); }
}

.anim-swipe {
  animation: swipeHand 2s infinite ease-in-out;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Pinch Zoom Animation</div>
                                        <div class="step-description">
                                            L'icona üîç si ingrandisce/riduce per comunicare gesture di zoom:
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes pinchZoom {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.3); opacity: 1; }
}

.anim-zoom {
  animation: pinchZoom 2s infinite ease-in-out;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Pulsating Menu Button</div>
                                        <div class="step-description">
                                            Il bottone menu ha un effetto ripple pulsante:
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes pulseBtn {
  0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
  100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>LocalStorage Persistence Logic</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">First-Visit Detection</div>
                                        <div class="step-description">
                                            Al caricamento, controlliamo se esiste un flag in localStorage:
                                        </div>
                                        <div class="code-block">
                                            <code>if (!localStorage.getItem('camaLeonteTutorialPro')) {
  $('#tutorial-overlay').addClass('active'); // Mostra tutorial
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Flag Saving on Close</div>
                                        <div class="step-description">
                                            Quando l'utente clicca "Entra nella Rivista", salviamo il flag:
                                        </div>
                                        <div class="code-block">
                                            <code>$('#close-tutorial').click(function() {
  $('#tutorial-overlay').css('opacity', '0'); // Fade out
  setTimeout(() => {
    $('#tutorial-overlay').removeClass('active');
  }, 600);
  
  localStorage.setItem('camaLeonteTutorialPro', 'true'); // Segna come visto
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Persistenza Cross-Session</div>
                                        <div class="step-description">
                                            Il localStorage sopravvive alla chiusura del browser. L'utente vedr√† il tutorial solo la primissima volta, poi mai pi√π (finch√© non cancella i cookies).
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- UX 4.2 - NAVIGATION -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>UX 4.2: Smart Navigation System</h3>
                    </div>
                    <span class="badge solution">Interactive</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Index Hotspots con AI-Style Animation</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Hotspot Mapping Data Structure</div>
                                        <div class="step-description">
                                            Un array di oggetti definisce le coordinate di ogni link:
                                        </div>
                                        <div class="code-block">
                                            <code>const map = [
  { t: 20, l: 5,  w: 40, h: 8,  p: 4  }, // Top, Left, Width, Height, Page
  { t: 30, l: 5,  w: 40, h: 12, p: 5  },
  { t: 45, l: 5,  w: 40, h: 8,  p: 6  },
  // ... 12 hotspot totali
];</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Tutte le dimensioni sono in percentuali, garantendo il responsive perfetto.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Dynamic Injection nel DOM</div>
                                        <div class="step-description">
                                            Gli hotspot vengono iniettati solo sulla pagina 3 (indice):
                                        </div>
                                        <div class="code-block">
                                            <code>if (i === 3) { // Pagina indice
  map.forEach((link) => {
    const hotspot = $('&lt;div class="index-link"&gt;&lt;/div&gt;').css({
      top: link.t + '%',
      left: link.l + '%',
      width: link.w + '%',
      height: link.h + '%'
    }).attr('data-target', link.p);
    
    interactiveLayer.append(hotspot);
  });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Pulsing Animation Effect</div>
                                        <div class="step-description">
                                            CSS animation che simula "respiro AI":
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes aiPulse {
  0% { 
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
  }
  50% { 
    background: rgba(52, 211, 153, 0.3);
    box-shadow: 0 0 15px rgba(52, 211, 153, 0.5);
    border: 1px solid rgba(110, 231, 183, 0.8);
  }
  100% { 
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
  }
}

.index-link {
  animation: aiPulse 3s infinite ease-in-out;
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Home Button (Torna all'Indice)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Floating UI Pattern</div>
                                        <div class="step-description">
                                            Bottone circolare fixed in alto a destra, sempre visibile:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;div id="home-btn" class="action-btn" title="Torna all'Indice"&gt;
  üè†
&lt;/div&gt;

CSS:
.action-btn {
  position: fixed;
  top: 20px;
  right: 20px; /* Posizione destra per home */
  z-index: 9999; /* Sempre sopra tutto */
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Click Handler</div>
                                        <div class="step-description">
                                            Salta istantaneamente alla pagina 3 (indice):
                                        </div>
                                        <div class="code-block">
                                            <code>$('#home-btn').click(function() {
  fb.turn('page', 3); // Vai a pagina indice
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">UX Benefit</div>
                                        <div class="step-description">
                                            Permette "escape rapido" da qualsiasi punto della rivista. Particolarmente utile se l'utente si perde o vuole ricominciare la navigazione.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Percentage-Based Responsive Coordinates</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Problema dei Pixel Assoluti</div>
                                        <div class="step-description">
                                            Se gli hotspot fossero definiti in pixel (es. <code>top: 100px</code>), non scalerebbero con il resize del flipbook. Su mobile sarebbero completamente fuori posizione.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Percentuali Relative</div>
                                        <div class="step-description">
                                            Usando percentuali (<code>top: 20%</code>), gli hotspot si scalano proporzionalmente:
                                        </div>
                                        <div class="code-block">
                                            <code>// Desktop: Flipbook 1000px alto
// Hotspot con top: 20% ‚Üí posizione: 200px

// Mobile: Flipbook 500px alto
// Hotspot con top: 20% ‚Üí posizione: 100px (scala perfetta!)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Calibrazione Iniziale</div>
                                        <div class="step-description">
                                            Le percentuali sono state calibrate manualmente:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Screenshot pagina indice</li>
                                                <li>Misurazione pixel di ogni riga indice</li>
                                                <li>Conversione in percentuale: <code>(pixel / altezzaTotale) * 100</code></li>
                                                <li>Test su mobile/desktop per validazione</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- UX 4.3 - ENHANCED VISUAL EFFECTS -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>UX 4.3: Enhanced Visual Effects & Micro-Interactions</h3>
                    </div>
                    <span class="badge solution">Polish</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Magic Shimmer Effect sui Link Indice</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Animazione "Respiro Magico"</div>
                                        <div class="step-description">
                                            I link dell'indice ora pulsano sottilmente come se "respirassero":
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes magicBreath {
  0%, 100% { 
    background: rgba(16, 185, 129, 0.05);
    border-color: rgba(16, 185, 129, 0.2);
    box-shadow: 0 0 5px rgba(16, 185, 129, 0.1);
  }
  50% { 
    background: rgba(16, 185, 129, 0.15);
    border-color: rgba(16, 185, 129, 0.5);
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
  }
}

.index-link {
  animation: magicBreath 4s infinite ease-in-out;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Shimmer Light Sweep</div>
                                        <div class="step-description">
                                            Un raggio di luce "attraversa" periodicamente ogni link usando un pseudo-elemento:
                                        </div>
                                        <div class="code-block">
                                            <code>@keyframes magicShimmer {
  0% { transform: translateX(-150%) skewX(-20deg); }
  50% { transform: translateX(150%) skewX(-20deg); }
  100% { transform: translateX(150%) skewX(-20deg); }
}

.index-link::after {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 50%; height: 100%;
  background: linear-gradient(
    to right, 
    transparent, 
    rgba(255, 255, 255, 0.6), 
    transparent
  );
  transform: translateX(-150%) skewX(-20deg);
  animation: magicShimmer 3s infinite;
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Perch√© Funziona (Psicologia UX)</div>
                                        <div class="step-description">
                                            Le animazioni sottili catturano l'attenzione periferica senza essere invasive:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Motion Attracts:</strong> Il movimento cattura l'occhio umano</li>
                                                <li><strong>Affordance Signal:</strong> "Questo elemento √® cliccabile"</li>
                                                <li><strong>Playfulness:</strong> Aggiunge personalit√† al design</li>
                                                <li><strong>Non Distrattiva:</strong> Timing lento (4s cycle) evita sovrastimolazione</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Hover State Enhancement</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Interruzione Animazione al Hover</div>
                                        <div class="step-description">
                                            Quando l'utente passa sopra un link, l'animazione si ferma per dare focus:
                                        </div>
                                        <div class="code-block">
                                            <code>.index-link:hover {
  animation: none; /* Stop breathing */
  background: rgba(16, 185, 129, 0.3); /* Solid state */
  border: 2px solid #34d399;
  box-shadow: 0 0 30px #10b981, /* Outer glow */
              inset 0 0 20px rgba(16, 185, 129, 0.5); /* Inner glow */
  transform: scale(1.02);
  z-index: 20; /* Porta in primo piano */
}

.index-link:hover::after {
  display: none; /* Rimuovi shimmer */
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Doppio Glow Effect</div>
                                        <div class="step-description">
                                            L'hover usa una combinazione di box-shadow esterni e interni:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Outer Glow:</strong> Simula luce emessa verso l'esterno</li>
                                                <li><strong>Inset Glow:</strong> Crea profondit√†, come vetro retroilluminato</li>
                                                <li><strong>Transform Scale:</strong> Leggero ingrandimento (2%) per feedback tattile</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Performance Note</div>
                                        <div class="step-description">
                                            Le box-shadow multiple possono essere costose su GPU. Limitiamo a 2 shadow max e usiamo <code>will-change: transform</code> per ottimizzare il composite layer.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>CTA Page Design System</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Gradiente Background Atmosferico</div>
                                        <div class="step-description">
                                            La pagina finale usa un gradiente diagonale che crea profondit√†:
                                        </div>
                                        <div class="code-block">
                                            <code>.end-page-content {
  background: linear-gradient(
    135deg, 
    #0f172a 0%,  /* Slate-900 dark */
    #1e293b 100% /* Slate-800 lighter */
  );
}</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            L'angolo 135deg crea movimento visivo da top-left a bottom-right.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Button States con Cubic Bezier</div>
                                        <div class="step-description">
                                            Le transizioni dei bottoni usano easing curve custom per "bounce" effect:
                                        </div>
                                        <div class="code-block">
                                            <code>.cta-btn {
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  /* Curva "ease-out-back" - overshoot leggero */
}

.cta-btn:hover {
  transform: scale(1.05); /* 5% pi√π grande */
}</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            La curva cubic-bezier crea un leggero "rimbalzo" che rende l'interazione pi√π giocosa.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Like Button State Machine</div>
                                        <div class="step-description">
                                            Il bottone like ha 2 stati visuali:
                                        </div>
                                        <div class="code-block">
                                            <code>/* State 1: Default (Gray) */
.btn-like {
  background: #334155; /* Slate-700 */
  color: white;
}

/* State 2: Liked (Red Glow) */
.btn-like.liked {
  background: #ef4444; /* Red-500 */
  box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
  /* Outer glow rosso pulsante */
}</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            La transizione √® gestita via classe CSS, non inline styles, per performance ottimali.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Typography & Color Palette Consistency</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Font Hierarchy</div>
                                        <div class="step-description">
                                            Utilizzo strategico dei font-weight:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>800 (ExtraBold):</strong> Titoli principali (welcome-title, end-title)</li>
                                                <li><strong>700 (Bold):</strong> Call-to-action button, label importanti</li>
                                                <li><strong>400 (Regular):</strong> Body text, descrizioni</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Color System</div>
                                        <div class="step-description">
                                            Palette coerente basata su Tailwind CSS:
                                        </div>
                                        <div class="code-block">
                                            <code>/* Primary (Green) */
#10b981 ‚Üí Emerald-500 (Success, Like, Primary CTA)

/* Background (Dark Slate) */
#0f172a ‚Üí Slate-900 (Deep background)
#1e293b ‚Üí Slate-800 (Card background)

/* Text */
#f8fafc ‚Üí Slate-50  (Primary text)
#94a3b8 ‚Üí Slate-400 (Muted text)

/* Danger (Red) */
#ef4444 ‚Üí Red-500 (Liked state)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Accessibilit√† Contrast Ratio</div>
                                        <div class="step-description">
                                            Tutti i contrasti rispettano WCAG 2.1 AA:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>White on #0f172a:</strong> 18.5:1 (AAA Large Text)</li>
                                                <li><strong>#10b981 on #0f172a:</strong> 4.8:1 (AA compliant)</li>
                                                <li><strong>#94a3b8 on #1e293b:</strong> 5.2:1 (AA compliant)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üìà FASE 6: Growth Hacking & Advanced Analytics (v2.1 - Febbraio 2025)</h2>

        <div class="timeline">

            <!-- FEATURE 6.1 - VIRAL LOOP SYSTEM -->
            <div class="card gold" onclick="toggleCard(this)" style="border-color: var(--accent-gold); border-width: 2px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 6.1: Viral Loop System & Engagement Metrics</h3>
                    </div>
                    <span class="badge gold">Growth</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Concetto di Viral Loop</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Che cos'√® un Viral Loop?</div>
                                        <div class="step-description">
                                            Un viral loop √® un meccanismo di crescita organica dove ogni utente √® incentivato a portare nuovi utenti. Nel nostro caso:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Utente A legge la rivista e mette Like</li>
                                                <li>Vede il contatore globale crescere (social proof)</li>
                                                <li>Condivide con amici (Utente B, C, D)</li>
                                                <li>Questi nuovi utenti ripetono il ciclo</li>
                                            </ol>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Psicologia del Social Proof</div>
                                        <div class="step-description">
                                            Il contatore Like pubblico sfrutta il bias cognitivo del "bandwagon effect":
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Validazione Sociale:</strong> "Se 100 persone hanno likato, deve essere buono"</li>
                                                <li><strong>FOMO (Fear of Missing Out):</strong> "Non voglio essere l'unico che non partecipa"</li>
                                                <li><strong>Gamification:</strong> Il numero che sale crea engagement</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Viral Coefficient (K-Factor)</div>
                                        <div class="step-description">
                                            La metrica chiave √®: <strong>Quanti nuovi utenti porta ogni utente?</strong>
                                        </div>
                                        <div class="code-block">
                                            <code>K = (Numero di inviti inviati) √ó (Tasso di conversione)

Esempio:
- Ogni utente condivide con 3 amici (inviti = 3)
- 30% di questi amici visitano il sito (conversione = 0.3)
- K = 3 √ó 0.3 = 0.9

K > 1 ‚Üí Crescita esponenziale virale
K < 1 ‚Üí Crescita lineare (comunque positiva)</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Global Like Counter Implementation</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Persistenza Cross-User</div>
                                        <div class="step-description">
                                            Il contatore Like √® condiviso tra TUTTI gli utenti che visitano il sito. Ogni like incrementa un numero globale salvato su CountAPI:
                                        </div>
                                        <div class="code-block">
                                            <code>// Namespace per isolamento del progetto
const NAMESPACE = 'il-camaleonte-magazine-v1';
const KEY = 'likes';

// Al caricamento: Leggi valore corrente
$.getJSON(`https://api.countapi.xyz/get/${NAMESPACE}/${KEY}`, 
  function(response) {
    $('#like-count').text(response.value); // Es: 142
  }
);</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Incremento Atomico</div>
                                        <div class="step-description">
                                            Quando un utente clicca Like, l'API esegue un'operazione atomica (thread-safe):
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '#like-btn', function() {
  // Guard: Controlla se ha gi√† likato
  if (localStorage.getItem('hasLikedCamaLeonte')) {
    alert("Hai gi√† messo like!");
    return;
  }

  // Hit API: Incrementa e ritorna nuovo valore
  $.getJSON(`https://api.countapi.xyz/hit/${NAMESPACE}/${KEY}`, 
    function(response) {
      $('#like-count').text(response.value); // Server ha fatto counter++
      btn.addClass('liked'); // Visual feedback
      localStorage.setItem('hasLikedCamaLeonte', 'true');
    }
  );
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Perch√© Atomico √® Critico</div>
                                        <div class="step-description">
                                            Scenario senza atomicit√†:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Utente A legge counter = 100</li>
                                                <li>Utente B legge counter = 100 (contemporaneamente)</li>
                                                <li>Entrambi fanno counter++ = 101</li>
                                                <li>Salvano 101 ‚Üí BUG: Un like perso!</li>
                                            </ol>
                                            CountAPI gestisce questo con lock server-side.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Native Share Integration</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Web Share API (Mobile-First)</div>
                                        <div class="step-description">
                                            Integrazione con il menu di condivisione nativo del sistema operativo:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '#share-btn', function() {
  const shareData = {
    title: 'Il CamaLEOnte',
    text: 'Scopri il nuovo numero del Magazine Il CamaLEOnte!',
    url: window.location.href
  };

  if (navigator.share) {
    // Mobile: Apre sheet nativo (WhatsApp, Telegram, Email...)
    navigator.share(shareData).catch(console.error);
  } else {
    // Desktop: Copia link negli appunti
    navigator.clipboard.writeText(window.location.href);
    alert("Link copiato negli appunti!");
  }
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi UX del Native Share</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Zero Friction:</strong> Un tap apre il menu familiare del telefono</li>
                                                <li><strong>Multi-Channel:</strong> L'utente sceglie dove condividere (WhatsApp/Telegram/Instagram/Email)</li>
                                                <li><strong>Sistema Nativo:</strong> Usa le API del OS, non un widget custom</li>
                                                <li><strong>Trust:</strong> L'utente riconosce l'UI nativa ‚Üí pi√π probabilit√† di share</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Desktop Fallback Strategy</div>
                                        <div class="step-description">
                                            Su desktop, <code>navigator.share</code> spesso non √® disponibile. Usiamo Clipboard API:
                                        </div>
                                        <div class="code-block">
                                            <code>navigator.clipboard.writeText(window.location.href)
  .then(() => alert("Link copiato negli appunti!"))
  .catch(err => console.error('Clipboard error:', err));</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            L'utente pu√≤ poi incollare manualmente su email/social.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Triple-Layer Analytics (Hybrid Tracking)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Layer 1: Public Like Counter</div>
                                        <div class="step-description">
                                            Visibile a tutti gli utenti, mostra engagement pubblico:
                                        </div>
                                        <div class="code-block">
                                            <code>// Endpoint pubblico
GET https://api.countapi.xyz/get/il-camaleonte-magazine-v1/likes
‚Üí { value: 142 }</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Layer 2: Shadow Share Counter (Hidden)</div>
                                        <div class="step-description">
                                            Traccia i tentativi di condivisione senza mostrare il numero all'utente:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '#share-btn', function() {
  // Shadow tracking (invisibile all'utente)
  $.getJSON(`https://api.countapi.xyz/hit/${NAMESPACE}/shares`);
  
  // Poi procedi con share normale
  navigator.share(shareData);
});</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Per leggere questo dato nascosto:
                                        </div>
                                        <div class="code-block">
                                            <code>// Endpoint privato (solo per developer)
GET https://api.countapi.xyz/info/il-camaleonte-magazine-v1/shares</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Layer 3: Google Analytics 4 Events</div>
                                        <div class="step-description">
                                            Integrazione con GA4 per analisi professionale:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '#share-btn', function() {
  // GA4 Event Trigger
  if (typeof gtag !== 'undefined') {
    gtag('event', 'share_magazine', {
      'event_category': 'engagement',
      'event_label': 'share_button_click',
      'value': 1
    });
  }
  
  // Shadow tracking
  $.getJSON(`https://api.countapi.xyz/hit/${NAMESPACE}/shares`);
  
  // Native share
  navigator.share(shareData);
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Perch√© Triple-Layer?</div>
                                        <div class="step-description">
                                            Ogni layer ha uno scopo diverso:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Public Counter (Likes):</strong> Social proof per gli utenti</li>
                                                <li><strong>Shadow Counter (Shares):</strong> Metrica virale nascosta per calcolare K-factor</li>
                                                <li><strong>GA4:</strong> Analisi dettagliate (device, browser, geografia, funnel)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Metriche Calcolabili & Growth Analysis</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Engagement Rate</div>
                                        <div class="step-description">
                                            Percentuale di utenti che interagiscono (Like o Share):
                                        </div>
                                        <div class="code-block">
                                            <code>Engagement Rate = (Likes + Shares) / Total Page Views √ó 100

Esempio:
- 500 visite totali (da GA4)
- 142 likes
- 87 share attempts (shadow counter)
- Engagement = (142 + 87) / 500 √ó 100 = 45.8%

Industry Benchmark: 10-20% √® ottimo</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Share-to-Like Ratio</div>
                                        <div class="step-description">
                                            Rapporto tra chi condivide e chi mette solo like:
                                        </div>
                                        <div class="code-block">
                                            <code>Share Ratio = Shares / Likes √ó 100

Esempio:
- 87 shares / 142 likes √ó 100 = 61.3%

Interpretazione:
> 50% ‚Üí Contenuto altamente virale
30-50% ‚Üí Buon livello di condivisione
< 30% ‚Üí Focus su incentivare share</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Viral Coefficient Tracking</div>
                                        <div class="step-description">
                                            Monitoraggio del K-factor nel tempo:
                                        </div>
                                        <div class="code-block">
                                            <code>// Settimana 1
Utenti = 100, Shares = 60, Nuovi utenti = 30
K = (60 / 100) √ó (30 / 60) = 0.6 √ó 0.5 = 0.3

// Settimana 2 (dopo ottimizzazioni)
Utenti = 130, Shares = 95, Nuovi utenti = 70
K = (95 / 130) √ó (70 / 95) = 0.73 √ó 0.74 = 0.54

‚Üí K in crescita, viralit√† migliorata!</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Dashboard di Monitoraggio</div>
                                        <div class="step-description">
                                            Fonti dati da combinare:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>CountAPI:</strong> Like pubblici, Share nascosti</li>
                                                <li><strong>Google Analytics:</strong> Page views, bounce rate, session duration</li>
                                                <li><strong>Calcoli manuali:</strong> K-factor, engagement rate, share ratio</li>
                                            </ul>
                                            Tip: Crea un Google Sheet che aggrega tutti questi dati settimanalmente.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Future Optimizations & A/B Testing Ideas</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Copy Testing</div>
                                        <div class="step-description">
                                            Test varianti del messaggio share:
                                        </div>
                                        <div class="code-block">
                                            <code>// Variante A (Attuale)
text: 'Scopri il nuovo numero del Magazine Il CamaLEOnte!'

// Variante B (Social Proof)
text: 'Unisciti a 142+ lettori che hanno amato Il CamaLEOnte!'

// Variante C (FOMO)
text: 'Non perderti l\'ultimo numero di Il CamaLEOnte!'

// Misura quale genera pi√π click</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Incentive Systems</div>
                                        <div class="step-description">
                                            Idee per aumentare viralit√†:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Milestone Rewards:</strong> "Raggiungiamo 500 like per sbloccare contenuto bonus!"</li>
                                                <li><strong>Referral Tracking:</strong> URL con parametri <code>?ref=user123</code></li>
                                                <li><strong>Leaderboard:</strong> Classifica dei top sharers (privacy-safe)</li>
                                                <li><strong>Badge System:</strong> "Hai condiviso con 5+ amici ‚Üí Badge Ambasciatore"</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Privacy & Ethical Considerations</div>
                                        <div class="step-description">
                                            Importante: Il tracking deve essere:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Trasparente:</strong> Cookie banner GDPR compliant</li>
                                                <li><strong>Anonimo:</strong> Non tracciamo identit√† personali</li>
                                                <li><strong>Opt-Out:</strong> Rispetta Do Not Track del browser</li>
                                                <li><strong>No Dark Patterns:</strong> Niente trick psicologici manipolativi</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üéØ FASE 7: Marketing & Professional Distribution (v2.2 - Febbraio 2025)</h2>

        <div class="timeline">

            <!-- FEATURE 7.1 - QR CODE VETTORIALE -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 7.1: QR Code Vettoriale Permanente</h3>
                    </div>
                    <span class="badge infrastructure">Print Design</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Problema dei QR Code Gratuiti</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Scadenza Programmata</div>
                                        <div class="step-description">
                                            La maggior parte dei generatori QR gratuiti online (QR Code Generator, QR Monkey free tier) creano codici che scadono dopo 14-30 giorni, rendendo inutili le locandine stampate.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Formato Raster (PNG/JPG)</div>
                                        <div class="step-description">
                                            I QR scaricati come PNG hanno risoluzione fissa. Stampati su un poster A3 o A2, i pixel si sgranano e lo smartphone fatica a leggerli.
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Link Dinamici con Tracciamento Invasivo</div>
                                        <div class="step-description">
                                            Alcuni servizi offrono QR "gratuiti" ma inseriscono un redirect tramite loro server (es. <code>bit.ly/xyz</code>). Questo:
                                            <ul style="margin-top: 10px;">
                                                <li>Rallenta il caricamento (doppio hop)</li>
                                                <li>Traccia gli utenti a tua insaputa</li>
                                                <li>Se il servizio chiude, il QR muore</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Soluzione: Adobe Express QR Generator</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Accesso al Tool</div>
                                        <div class="step-description">
                                            Adobe Express offre un generatore QR completamente gratuito senza scadenza:
                                        </div>
                                        <div class="code-block">
                                            <code>URL: https://www.adobe.com/express/feature/image/qr-code-generator

Caratteristiche:
- Nessuna registrazione richiesta
- Export SVG/PDF vettoriale
- QR Code statico (link diretto, no redirect)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Configurazione Ottimale</div>
                                        <div class="step-description">
                                            Parametri raccomandati per massima scansionabilit√†:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>URL:</strong> Link diretto GitHub Pages (no shortener)</li>
                                                <li><strong>Colore:</strong> Nero #000000 su sfondo bianco (contrasto massimo)</li>
                                                <li><strong>Stile punti:</strong> Quadrati classici (no fantasie, riducono leggibilit√†)</li>
                                                <li><strong>Error Correction:</strong> Level H (30% recupero danni)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Export in Formato Vettoriale</div>
                                        <div class="step-description">
                                            Scaricare come SVG (Scalable Vector Graphics):
                                        </div>
                                        <div class="code-block">
                                            <code>Download ‚Üí SVG

Vantaggi SVG:
- Scalabile infinitamente senza perdita qualit√†
- File leggero (~2-5 KB)
- Modificabile in Illustrator/Inkscape
- Stampabile a qualsiasi dimensione (da biglietto da visita a billboard)</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Alternativa: Adobe InDesign Native Generator</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Generazione Nativa in InDesign</div>
                                        <div class="step-description">
                                            Per chi sta impaginando la locandina direttamente in InDesign:
                                        </div>
                                        <div class="code-block">
                                            <code>Menu: Oggetto ‚Üí Genera codice QR

Configurazione:
1. Tipo: Collegamento Web
2. URL: [GitHub Pages Link]
3. Colore: Nero campione CMYK 0/0/0/100
4. Disegna il frame sul layout</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi dell'Oggetto Vettoriale Nativo</div>
                                        <div class="step-description">
                                            Il QR generato in InDesign √® modificabile:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Editabile:</strong> Doppio click ‚Üí cambi URL senza rigenerare</li>
                                                <li><strong>Ridimensionabile:</strong> Scala senza perdita qualit√†</li>
                                                <li><strong>Colore Pantone:</strong> Applicabile per stampa offset professionale</li>
                                                <li><strong>Export PDF:</strong> Embedded vettoriale nel PDF finale</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Quando Usare InDesign vs Adobe Express</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Adobe Express:</strong> Quick export per locandine Word/PowerPoint</li>
                                                <li><strong>InDesign:</strong> Workflow professionale per stampa tipografica</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Design Guidelines per Stampa A4</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Dimensioni Ottimali</div>
                                        <div class="step-description">
                                            Per massima scansionabilit√† su locandina A4:
                                        </div>
                                        <div class="code-block">
                                            <code>Dimensione QR: 5x5 cm (minimum viable)
Raccomandato: 7x7 cm (sweet spot)
Maximum: 10x10 cm (per visibilit√† da lontano)

Distanza scansione:
- 5 cm ‚Üí 30 cm distanza
- 7 cm ‚Üí 50 cm distanza
- 10 cm ‚Üí 1 metro distanza</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Call-to-Action (CTA) Text</div>
                                        <div class="step-description">
                                            Non lasciare il QR "muto". Aggiungere testo esplicativo:
                                        </div>
                                        <div class="code-block">
                                            <code>Esempi CTA efficaci:

‚úÖ "Scansiona per leggere la rivista interattiva"
‚úÖ "Scopri i contenuti aumentati con video AI"
‚úÖ "Accedi alla versione digitale"

‚ùå Evitare:
- Nessun testo
- "QR Code" (ovvio)
- Istruzioni tecniche ("Apri la fotocamera...")</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Contrasto e Supporto</div>
                                        <div class="step-description">
                                            Regole critiche per stampa:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Contrasto Minimo:</strong> Nero su bianco (ratio 21:1)</li>
                                                <li><strong>Evitare:</strong> QR colorati su sfondi patterned</li>
                                                <li><strong>Quiet Zone:</strong> Bordo bianco di almeno 4 moduli attorno al QR</li>
                                                <li><strong>Carta:</strong> Opaca preferibile a lucida (riduce riflessi camera)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Testing & Quality Assurance</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Pre-Stampa Testing</div>
                                        <div class="step-description">
                                            Prima di stampare 100 copie, testare:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Stampa 1 copia di prova</li>
                                                <li>Scansiona con almeno 3 smartphone diversi (iPhone, Android, Huawei)</li>
                                                <li>Testa da diverse distanze (30cm, 50cm, 1m)</li>
                                                <li>Verifica redirect corretto al sito</li>
                                            </ol>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Longevit√† del QR</div>
                                        <div class="step-description">
                                            Il QR statico con link diretto GitHub Pages:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Durata:</strong> Infinita (finch√© GitHub Pages esiste)</li>
                                                <li><strong>Nessun Canone:</strong> Zero costi mensili</li>
                                                <li><strong>Ownership:</strong> Pieno controllo del link</li>
                                                <li><strong>Archivio Storico:</strong> Accessibile anche tra 10+ anni</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Backup & Redundancy</div>
                                        <div class="step-description">
                                            Conservare il file SVG originale in almeno 3 posti:
                                            <ul style="margin-top: 10px;">
                                                <li>Repository GitHub (commit nel repo)</li>
                                                <li>Google Drive della scuola</li>
                                                <li>Disco locale (backup offline)</li>
                                            </ul>
                                            Se in futuro serve ristampare, avrai sempre l'originale vettoriale.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FEATURE 7.2 - UTM TRACKING -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 7.2: UTM Parameters & Advanced Attribution</h3>
                    </div>
                    <span class="badge infrastructure">Analytics</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Problema dell'Attribution Cieca</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Direct Traffic Ambiguity</div>
                                        <div class="step-description">
                                            Se il QR Code contiene solo il link "nudo" (<code>github.io/camaleonte</code>), Google Analytics classifica tutti gli accessi come "Direct":
                                        </div>
                                        <div class="code-block">
                                            <code>GA4 Report:
Source/Medium: (direct) / (none)

Impossibile sapere se l'utente:
- Ha digitato manualmente l'URL
- Ha scansionato il QR della locandina
- Ha cliccato un bookmark salvato
- √à arrivato da email senza tracking</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">ROI Non Misurabile</div>
                                        <div class="step-description">
                                            Senza attribution, non puoi rispondere a domande critiche:
                                            <ul style="margin-top: 10px;">
                                                <li>"Quante persone hanno effettivamente scansionato i poster?"</li>
                                                <li>"Vale la pena stampare altre locandine?"</li>
                                                <li>"Il QR in corridoio funziona meglio di quello in biblioteca?"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Soluzione: UTM Parameters</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Anatomia di un Link UTM</div>
                                        <div class="step-description">
                                            I parametri UTM sono suffissi aggiunti all'URL per identificare la sorgente:
                                        </div>
                                        <div class="code-block">
                                            <code>Link Base:
https://github.io/camaleonte

Link con UTM:
https://github.io/camaleonte?utm_source=cartaceo&utm_medium=qrcode&utm_campaign=lancio_scuola

Struttura:
? = Inizio query string
utm_source = Da dove arriva (cartaceo/digitale/email)
utm_medium = Che mezzo usa (qrcode/social/banner)
utm_campaign = Nome della campagna marketing
& = Separatore tra parametri</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Parametri Standard Google</div>
                                        <div class="step-description">
                                            Google Analytics riconosce 5 parametri UTM standard:
                                        </div>
                                        <div class="code-block">
                                            <code>utm_source (Obbligatorio)
‚Üí Identifica la sorgente (es: cartaceo, newsletter, facebook)

utm_medium (Obbligatorio)
‚Üí Identifica il mezzo (es: qrcode, email, cpc)

utm_campaign (Raccomandato)
‚Üí Nome della campagna (es: lancio_scuola, open_day)

utm_term (Opzionale)
‚Üí Parole chiave per campagne a pagamento

utm_content (Opzionale)
‚Üí Varia nti A/B (es: poster_rosso, poster_blu)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Implementazione nel QR Code</div>
                                        <div class="step-description">
                                            Link finale da inserire nel generatore QR:
                                        </div>
                                        <div class="code-block">
                                            <code>https://[tuo-username].github.io/camaleonte/?utm_source=cartaceo&utm_medium=qrcode&utm_campaign=lancio_scuola

Risultato in GA4:
Source: cartaceo
Medium: qrcode
Campaign: lancio_scuola</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Spiegazione Narrativa: Il "QR Code Parlante"</div>
                                        <div class="step-description">
                                            <strong>Versione pitch-friendly per presentazioni ai docenti/dirigenti:</strong>
                                        </div>
                                        <div class="code-block" style="background: rgba(245, 158, 11, 0.1); border-left-color: var(--accent-gold);">
                                            <code style="color: var(--accent-gold);">"Questo non √® un semplice QR Code. √à un QR Code Parlante.

Al suo interno non c'√® solo l'indirizzo web, ma anche un 
codice crittografato (UTM) che comunica ai nostri sistemi 
di analisi che l'utente sta arrivando specificamente dalla 
carta stampata.

Se guardate attentamente, noterete che il QR √® leggermente 
pi√π denso (ha pi√π puntini) rispetto a un QR normale. 
Questo perch√© contiene pi√π informazioni di tracciamento."</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 15px;">
                                            <strong>Perch√© questa spiegazione funziona:</strong>
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Metafora Memorabile:</strong> "QR Parlante" √® pi√π evocativo di "parametrizzato"</li>
                                                <li><strong>Termine Tecnico Accessibile:</strong> "Crittografato" suona professionale ma comprensibile</li>
                                                <li><strong>Visual Proof:</strong> Mostrare fisicamente che √® "pi√π denso" rende tangibile il concetto</li>
                                                <li><strong>No Jargon:</strong> Evita "utm_source", "query string", "encoding"</li>
                                            </ul>
                                        </div>
                                        <div class="step-description" style="margin-top: 15px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                                            <strong>üí° Pro Tip per la Presentazione:</strong><br>
                                            Durante il pitch, mostra fisicamente due QR affiancati:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Sinistra:</strong> QR semplice (github.io/camaleonte)</li>
                                                <li><strong>Destra:</strong> QR con UTM (visibilmente pi√π denso)</li>
                                            </ul>
                                            Questo crea un "aha moment" visivo che fa capire istantaneamente la differenza anche a chi non √® tecnico.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>UTM Multi-Location Strategy</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">QR Code Diversi per Location</div>
                                        <div class="step-description">
                                            Creare varianti del QR per tracciare quale posizione fisica performa meglio:
                                        </div>
                                        <div class="code-block">
                                            <code>// QR per Corridoio Principale
?utm_source=cartaceo&utm_medium=qrcode&utm_content=corridoio

// QR per Biblioteca
?utm_source=cartaceo&utm_medium=qrcode&utm_content=biblioteca

// QR per Aula Magna
?utm_source=cartaceo&utm_medium=qrcode&utm_content=aula_magna</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Analisi Performance per Location</div>
                                        <div class="step-description">
                                            In GA4, navigare a:
                                        </div>
                                        <div class="code-block">
                                            <code>Reports ‚Üí Acquisition ‚Üí Traffic acquisition

Filtrare per:
Medium = qrcode

Poi guardare la colonna "Content" per vedere:
- corridoio: 142 scan
- biblioteca: 67 scan
- aula_magna: 31 scan

‚Üí Il corridoio ha 2x performance della biblioteca!</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Decisioni Data-Driven</div>
                                        <div class="step-description">
                                            Con questi dati, puoi:
                                            <ul style="margin-top: 10px;">
                                                <li>Stampare pi√π copie per le location ad alto traffico</li>
                                                <li>Rimuovere poster da location con zero scan</li>
                                                <li>Testare design diversi per location specifiche (A/B testing fisico)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>ROI Calculation & Reporting</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Cost per Acquisition (CPA)</div>
                                        <div class="step-description">
                                            Calcolare il costo per lettore acquisito via QR:
                                        </div>
                                        <div class="code-block">
                                            <code>Costi Campagna Cartacea:
- Stampa 50 poster A4: ‚Ç¨15
- Stampa 200 volantini A5: ‚Ç¨25
- Totale: ‚Ç¨40

Risultati GA4:
- Scan QR totali: 240
- Lettori unici: 180

CPA = ‚Ç¨40 / 180 = ‚Ç¨0.22 per lettore

Benchmark: CPA sotto ‚Ç¨1 √® eccellente per campagne scolastiche</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Conversion Rate Tracking</div>
                                        <div class="step-description">
                                            Misurare quanti scanner diventano "engaged readers":
                                        </div>
                                        <div class="code-block">
                                            <code>Funnel Analysis:
1. Scan QR: 240 utenti
2. Caricamento sito: 210 utenti (87.5% success)
3. Lettura >3 pagine: 156 utenti (65% engaged)
4. Like/Share: 89 utenti (37% super-engaged)

Conversion Rate = 89/240 = 37%</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Pitch ai Dirigenti (ROI Messaging)</div>
                                        <div class="step-description">
                                            Quando presenti il progetto, usa questa formula magica:
                                        </div>
                                        <div class="code-block">
                                            <code>"Grazie ai link UTM crittografati nel QR Code, siamo in grado 
di distinguere chirurgicamente chi arriva digitando il sito 
da chi ha scansionato la locandina in corridoio. 

Questo ci permette di calcolare il ROI (ritorno sull'investimento) 
della nostra campagna cartacea: 

Con ‚Ç¨40 di stampa abbiamo raggiunto 180 lettori unici, 
con un CPA di soli ‚Ç¨0.22."</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            La parola "ROI" fa impazzire i dirigenti scolastici! üòâ
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FEATURE 7.3 - PRESENTAZIONE PITCH -->
            <div class="card gold" onclick="toggleCard(this)" style="border-color: var(--accent-gold); border-width: 2px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 7.3: Presentation Deck & Stakeholder Pitch</h3>
                    </div>
                    <span class="badge gold">Communication</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Struttura Presentation Deck (8 Slide)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Slide 1: Copertina & Visione</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Il CamaLEOnte: Oltre la Carta<br>
                                            <strong>Sottotitolo:</strong> Evoluzione in Web App Interattiva e Aumentata
                                        </div>
                                        <div class="code-block">
                                            <code>Elemento Visivo:
- Logo della Rivista al centro
- QR Code grande in basso a destra
- Sfondo scuro elegante (stesso del sito)

üó£Ô∏è Script:
"Buongiorno. Oggi vi mostro come abbiamo trasformato 
il giornalino scolastico da semplice PDF a una vera 
Web Application interattiva, sicura e misurabile."</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Slide 2: Architettura Ibrida</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Non un semplice PDF
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì Tecnologia Ibrida: Unisce nitidezza stampa a fluidit√† web
‚úì Multimedia Integrato: Video AI (Google Veo) incorporati
‚úì Rendering Vettoriale: Testo nitido a qualsiasi zoom

Elemento Visivo:
Screenshot diviso: sinistra pagina testo, destra video

üó£Ô∏è Script:
"Non ci siamo limitati a caricare un file. Abbiamo creato 
un sistema ibrido: le pagine di testo usano vettori per 
essere nitide come carta stampata, mentre altre pagine 
prendono vita con video generati dall'Intelligenza 
Artificiale."</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Slide 3: UX Inclusiva</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Un'Esperienza per Tutti
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì Onboarding Immersivo: Tutorial animato al primo accesso
‚úì Navigazione Intuitiva: Gesture naturali (Swipe, Pinch)
‚úì Design Responsivo: Si adatta a Smartphone, Tablet, LIM

Elemento Visivo:
Screenshot tutorial con card "Sfoglia", "Zoom", "Vista"

üó£Ô∏è Script:
"Sappiamo che non tutti sono esperti tecnologici. 
Per questo, appena si apre la rivista, un tutorial 
animato guida il lettore. L'interfaccia √® stata studiata 
per essere invisibile: il contenuto √® protagonista."</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Slide 4: Pagina Fantasma (Innovazione)</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Dinamismo in Tempo Reale
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì Pagina 25 Generated-on-the-fly: Creata dal codice
‚úì Viral Loop: Condivisione nativa WhatsApp/Telegram
‚úì Engagement: Like globale persistente

Elemento Visivo:
Screenshot Pagina 25 con bottone Like evidenziato

üó£Ô∏è Script:
"Questa √® la vera magia tecnica. L'ultima pagina, 
la 25, non √® un file statico. Viene generata in tempo 
reale dal browser. Questo ci permette di avere funzioni 
'social' come un contatore di Mi Piace globale."</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Slide 5-8: Security, Distribution & Analytics</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Slide 5: Sicurezza</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Tutela Propriet√† Intellettuale
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì Code Obfuscation: Codice sorgente blindato
‚úì Anti-Copy: Blocco tasto destro e selezione testo
‚úì Integrit√†: Impossibile scaricare contenuti grezzi

Elemento Visivo:
Icona lucchetto/scudo sopra codice sfocato

üó£Ô∏è Script:
"In un progetto scolastico, proteggere il lavoro degli 
studenti √® prioritario. Abbiamo implementato sistemi 
di offuscamento che impediscono la copia non autorizzata."</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Slide 6: QR Code Eterno</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Il QR Code "Eterno"
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì QR Statico Vettoriale: Standard Adobe
‚úì Zero Scadenza: Nessun redirect, nessun canone
‚úì Stampa HD: Ottimizzato per locandine cartacee

Elemento Visivo:
QR Code vettoriale nero su bianco ben visibile

üó£Ô∏è Script:
"Per la distribuzione fisica abbiamo evitato i generatori 
gratuiti che scadono dopo 14 giorni. Abbiamo creato un 
QR Code Professionale: funzioner√† per sempre, garantendo 
che l'archivio storico resti accessibile anche tra 10 anni."</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Slide 7: Analytics Data-Driven</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Un Progetto Misurabile
                                        </div>
                                        <div class="code-block">
                                            <code>Punti Elenco:
‚úì Google Analytics 4: Monitoraggio lettori e geografia
‚úì Event Tracking: Analisi click Like/Condividi
‚úì Feedback Loop: Dati reali per prossime edizioni

Elemento Visivo:
Grafico a torta/linee di Analytics

üó£Ô∏è Script + EFFETTO BOMBA:
"Non ci limitiamo a contare visite. Grazie a link UTM 
crittografati nel QR Code, distinguiamo chirurgicamente 
chi arriva digitando il sito da chi ha scansionato 
la locandina in corridoio.

Questo ci permette di calcolare il ROI (ritorno 
sull'investimento) della nostra campagna cartacea."

[La parola ROI fa impazzire i dirigenti! üòâ]</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Slide 8: Finale con CTA</div>
                                        <div class="step-description">
                                            <strong>Titolo:</strong> Grazie per l'Attenzione<br>
                                            <strong>Sottotitolo:</strong> Scansiona per provare "Il CamaLEOnte"
                                        </div>
                                        <div class="code-block">
                                            <code>Elemento Visivo:
- QR Code GIGANTE al centro
- Indirizzo web scritto sotto in chiaro

üó£Ô∏è Script:
"Il CamaLEOnte oggi √® un esempio di come la scuola 
possa abbracciare il digitale senza compromessi. 
Vi invito a scansionare il codice ora stesso per 
provare l'esperienza. Grazie."</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Presentation Best Practices</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Timing & Pacing</div>
                                        <div class="step-description">
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Durata Totale:</strong> 8-10 minuti (1-1.5 min per slide)</li>
                                                <li><strong>Pause Strategiche:</strong> Dopo slide 4 e 7 (momenti "wow")</li>
                                                <li><strong>Q&A:</strong> Riservare 5 minuti finali per domande</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Visual Design Consistency</div>
                                        <div class="step-description">
                                            Mantenere coerenza visiva:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Palette:</strong> Stessi colori del sito (#0f172a, #10b981)</li>
                                                <li><strong>Font:</strong> Montserrat (stesso della rivista)</li>
                                                <li><strong>Layout:</strong> Template unificato per tutte le slide</li>
                                                <li><strong>Icons:</strong> Stile flat minimale (no clipart)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Audience Tailoring</div>
                                        <div class="step-description">
                                            Adattare enfasi in base al pubblico:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Dirigenti:</strong> Enfasi su ROI, sicurezza, longevit√†</li>
                                                <li><strong>Docenti:</strong> Enfasi su UX, accessibilit√†, didattica</li>
                                                <li><strong>Studenti:</strong> Enfasi su tech stack, social features</li>
                                                <li><strong>Tech Staff:</strong> Deep dive architettura ibrida</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üìä FASE 8: Advanced Analytics Dashboard (v2.3 - Febbraio 2025)</h2>

        <div class="timeline">

            <!-- FEATURE 8.1 - MIGRATION COUNTERAPI -->
            <div class="card infrastructure" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 8.1: Migration to CounterAPI.dev</h3>
                    </div>
                    <span class="badge infrastructure">API Upgrade</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Perch√© Migrare da CountAPI.xyz</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Limitazioni CountAPI.xyz</div>
                                        <div class="step-description">
                                            Il servizio originale (countapi.xyz) presentava criticit√†:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>No Authentication:</strong> Impossibile proteggere i counter da manipolazioni</li>
                                                <li><strong>No Dashboard:</strong> Nessuna UI per visualizzare graficamente i dati</li>
                                                <li><strong>Rate Limiting Aggressivo:</strong> Blocchi frequenti su traffico alto</li>
                                                <li><strong>Single Endpoint:</strong> Difficile gestire query complesse</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Vantaggi CounterAPI.dev</div>
                                        <div class="step-description">
                                            La nuova piattaforma offre feature enterprise-grade gratuite:
                                        </div>
                                        <div class="code-block">
                                            <code>‚úÖ Namespace Isolation: Ogni progetto ha namespace privato
‚úÖ Authentication: API Key per proteggere write operations
‚úÖ Web Dashboard: UI grafica per monitoraggio real-time
‚úÖ Multiple Counters: Organizzazione gerarchica dei dati
‚úÖ Higher Rate Limits: 10,000 req/ora vs 100/ora
‚úÖ Analytics API: Endpoint dedicati per export dati</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Compatibilit√† Backward</div>
                                        <div class="step-description">
                                            L'API di CounterAPI.dev √® simile ma non identica. Serve refactoring del codice JavaScript per adattare gli endpoint.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Setup: Registrazione e Namespace Creation</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Account Registration</div>
                                        <div class="step-description">
                                            Processo di onboarding su CounterAPI.dev:
                                        </div>
                                        <div class="code-block">
                                            <code>1. Vai su https://counterapi.dev
2. Click su "Sign Up" (gratuito)
3. Verifica email
4. Login ‚Üí Dashboard</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Namespace Creation</div>
                                        <div class="step-description">
                                            Il namespace √® il "container" che isola i counter del progetto:
                                        </div>
                                        <div class="code-block">
                                            <code>Dashboard ‚Üí Create Namespace

Settings:
- Name: camaleonte_v1
- Description: Il CamaLEOnte Magazine Analytics
- Visibility: Private (recommended)

‚ö†Ô∏è Il nome namespace √® PERMANENTE, sceglilo con cura!</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Counter Initialization</div>
                                        <div class="step-description">
                                            Creare i due counter necessari:
                                        </div>
                                        <div class="code-block">
                                            <code>Namespace: camaleonte_v1 ‚Üí Add Counter

Counter 1:
- Name: likes
- Initial Value: 0
- Allow Public Read: ‚úÖ YES
- Allow Public Write: ‚ùå NO (solo via API key)

Counter 2:
- Name: shares
- Initial Value: 0
- Allow Public Read: ‚úÖ YES
- Allow Public Write: ‚ùå NO</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Code Refactoring: index.html Update</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Aggiornamento Endpoint API</div>
                                        <div class="step-description">
                                            Sostituire le chiamate a countapi.xyz con counterapi.dev:
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE (countapi.xyz)
const NAMESPACE = 'il-camaleonte-magazine-v1';
$.getJSON(`https://api.countapi.xyz/get/${NAMESPACE}/likes`)

// AFTER (counterapi.dev)
const NAMESPACE = 'camaleonte_v1';
const API_URL = 'https://api.counterapi.dev/v1';
$.getJSON(`${API_URL}/${NAMESPACE}/likes/`)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Nuova Logica di Lettura (GET)</div>
                                        <div class="step-description">
                                            CounterAPI.dev ritorna un oggetto diverso:
                                        </div>
                                        <div class="code-block">
                                            <code>// Caricamento iniziale
$.getJSON(`${API_URL}/${NAMESPACE}/likes/`, function(response) {
  // BEFORE: response.value
  // AFTER:  response.count
  updateLikeDisplay(response.count);
}).fail(function() {
  $('#like-count').text("0"); // Fallback
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Nuova Logica di Incremento (POST)</div>
                                        <div class="step-description">
                                            L'endpoint per incrementare cambia da <code>/hit</code> a <code>/up</code>:
                                        </div>
                                        <div class="code-block">
                                            <code>// Click Like Button
$(document).on('click', '#like-btn', function() {
  if (localStorage.getItem('hasLikedCamaLeonte')) {
    alert("Hai gi√† messo like!");
    return;
  }

  // BEFORE: /hit/{namespace}/{key}
  // AFTER:  /{namespace}/{key}/up
  $.getJSON(`${API_URL}/${NAMESPACE}/likes/up`, function(response) {
    updateLikeDisplay(response.count);
    btn.addClass('liked');
    localStorage.setItem('hasLikedCamaLeonte', 'true');
    
    // Google Analytics
    if (typeof gtag !== 'undefined') {
      gtag('event', 'like_magazine');
    }
  });
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Shadow Share Counter Update</div>
                                        <div class="step-description">
                                            Stesso pattern per il counter nascosto delle condivisioni:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).on('click', '#share-btn', function() {
  // Shadow tracking (invisibile all'utente)
  $.getJSON(`${API_URL}/${NAMESPACE}/shares/up`);
  
  // GA4 Event
  if (typeof gtag !== 'undefined') {
    gtag('event', 'share_magazine');
  }

  // Native share dialog
  const shareData = {
    title: 'Il CamaLEOnte',
    text: 'Scopri il nuovo numero!',
    url: window.location.href
  };
  
  if (navigator.share) {
    navigator.share(shareData);
  } else {
    navigator.clipboard.writeText(window.location.href);
    alert("Link copiato!");
  }
});</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Testing & Migration Validation</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Pre-Migration Snapshot</div>
                                        <div class="step-description">
                                            Prima di switchare, salvare i dati esistenti:
                                        </div>
                                        <div class="code-block">
                                            <code>// Recupera valori finali da countapi.xyz
GET https://api.countapi.xyz/info/il-camaleonte-magazine-v1/likes
‚Üí { value: 142 }

GET https://api.countapi.xyz/info/il-camaleonte-magazine-v1/shares
‚Üí { value: 87 }

// Annota questi numeri per inizializzare i nuovi counter</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Seeding Initial Values</div>
                                        <div class="step-description">
                                            Inizializzare i nuovi counter con i valori storici per continuit√†:
                                        </div>
                                        <div class="code-block">
                                            <code>// Via Dashboard CounterAPI.dev
Edit Counter "likes" ‚Üí Set Value: 142
Edit Counter "shares" ‚Üí Set Value: 87

// Oppure via API (se preferisci script)
POST https://api.counterapi.dev/v1/camaleonte_v1/likes/set
Body: { value: 142 }</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Smoke Testing</div>
                                        <div class="step-description">
                                            Test checklist post-migration:
                                            <ul style="margin-top: 10px;">
                                                <li>‚úÖ Caricamento pagina 25 mostra contatore corretto</li>
                                                <li>‚úÖ Click Like incrementa di 1</li>
                                                <li>‚úÖ LocalStorage previene doppio like</li>
                                                <li>‚úÖ Share button incrementa shadow counter</li>
                                                <li>‚úÖ Fallback funziona se API offline</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FEATURE 8.2 - ANALYTICS DASHBOARD -->
            <div class="card gold" onclick="toggleCard(this)" style="border-color: var(--accent-purple); border-width: 2px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 8.2: Real-Time Analytics Dashboard (dashboard.html)</h3>
                    </div>
                    <span class="badge gold">Visualization</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Dashboard Architecture Overview</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Obiettivo del Dashboard</div>
                                        <div class="step-description">
                                            Creare un'interfaccia visuale dedicata ai docenti per:
                                            <ul style="margin-top: 10px;">
                                                <li>Monitorare engagement in tempo reale (likes/shares)</li>
                                                <li>Visualizzare metriche tramite grafici (Chart.js)</li>
                                                <li>Accesso senza competenze tecniche (URL semplice)</li>
                                                <li>Auto-refresh per aggiornamenti live</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Tech Stack Dashboard</div>
                                        <div class="step-description">
                                            Librerie utilizzate per la visualizzazione:
                                        </div>
                                        <div class="code-block">
                                            <code>1. Chart.js (v4.x)
   ‚Üí Grafici interattivi (bar, doughnut, line)
   
2. jQuery 3.6
   ‚Üí AJAX calls per fetch dati API
   
3. Montserrat Font
   ‚Üí Coerenza visiva con rivista

4. Vanilla CSS Grid
   ‚Üí Layout responsive KPI cards</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">File Structure</div>
                                        <div class="step-description">
                                            Il dashboard √® un file HTML standalone:
                                        </div>
                                        <div class="code-block">
                                            <code>Repository:
‚îú‚îÄ‚îÄ index.html (Rivista principale)
‚îú‚îÄ‚îÄ dashboard.html (Pannello docenti) ‚Üê NUOVO
‚îú‚îÄ‚îÄ 1.pdf
‚îú‚îÄ‚îÄ 2.pdf
‚îî‚îÄ‚îÄ ...

URL Accesso:
https://[username].github.io/camaleonte/dashboard.html</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>KPI Cards: I "Numeroni" Engagement</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Design Pattern: Card Grid</div>
                                        <div class="step-description">
                                            Layout a 3 colonne con auto-responsivit√†:
                                        </div>
                                        <div class="code-block">
                                            <code>.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

<!-- Card 1: Likes -->
<div class="card likes">
  <h3>Apprezzamento Utenti</h3>
  <div class="number" id="total-likes">142</div>
  <div class="trend">‚ù§Ô∏è Likes Totali</div>
</div></code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Card Styling & Color Coding</div>
                                        <div class="step-description">
                                            Ogni card ha un colore top-border specifico per differenziazione visiva:
                                        </div>
                                        <div class="code-block">
                                            <code>.card.likes { border-color: #ef4444; } // Red (emotivo)
.card.shares { border-color: #3b82f6; } // Blue (viralit√†)
.card { border-color: #e5e7eb; } // Gray (neutro)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Engagement Rate Calculation</div>
                                        <div class="step-description">
                                            Metrica sintetica per "effetto wow":
                                        </div>
                                        <div class="code-block">
                                            <code>// Formula approssimativa per engagement
let rate = 0;
if (likes > 0) {
  rate = ((likes + (shares * 2)) / 10).toFixed(1);
}
$('#engagement-rate').text(rate + '%');

// Shares hanno peso 2x perch√© rappresentano azione pi√π attiva</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 10px;">
                                            Nota: Questa √® una formula "cosmetica" per impressionare i dirigenti. Per un vero engagement rate servirebbero anche i page views da GA4.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Chart.js Integration: Bar Chart</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Canvas Element Setup</div>
                                        <div class="step-description">
                                            Chart.js richiede un elemento <code>&lt;canvas&gt;</code> come target:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;div class="chart-container"&gt;
  &lt;canvas id="myChart"&gt;&lt;/canvas&gt;
&lt;/div&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Chart Configuration</div>
                                        <div class="step-description">
                                            Inizializzazione del grafico a barre:
                                        </div>
                                        <div class="code-block">
                                            <code>function updateChart(likes, shares) {
  const ctx = document.getElementById('myChart').getContext('2d');
  
  if (myChart) myChart.destroy(); // Pulisce grafico vecchio
  
  myChart = new Chart(ctx, {
    type: 'bar', // Tipo grafico
    data: {
      labels: ['Likes ‚ù§Ô∏è', 'Shares üöÄ'],
      datasets: [{
        label: 'Interazioni Utente',
        data: [likes, shares],
        backgroundColor: [
          'rgba(239, 68, 68, 0.6)', // Rosso trasparente
          'rgba(16, 185, 129, 0.6)'  // Verde trasparente
        ],
        borderColor: [
          'rgba(239, 68, 68, 1)',    // Bordo solido
          'rgba(16, 185, 129, 1)'
        ],
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        title: { 
          display: true, 
          text: 'Confronto Metriche di Ingaggio' 
        }
      },
      scales: {
        y: { beginAtZero: true } // Asse Y parte da 0
      }
    }
  });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Alternative Chart Types</div>
                                        <div class="step-description">
                                            Chart.js supporta diversi tipi. Basta cambiare <code>type</code>:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>type: 'bar'</strong> ‚Üí Grafico a barre (default)</li>
                                                <li><strong>type: 'doughnut'</strong> ‚Üí Grafico a ciambella (percentuali)</li>
                                                <li><strong>type: 'line'</strong> ‚Üí Grafico a linee (trend temporale)</li>
                                                <li><strong>type: 'pie'</strong> ‚Üí Grafico a torta</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Data Fetching & Auto-Refresh</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Async Data Loading Function</div>
                                        <div class="step-description">
                                            Funzione principale che orchestra il fetch dati:
                                        </div>
                                        <div class="code-block">
                                            <code>async function loadData() {
  try {
    // 1. Fetch parallelo di likes e shares
    const likeRes = await $.getJSON(`${API_URL}/${NAMESPACE}/likes/`);
    const shareRes = await $.getJSON(`${API_URL}/${NAMESPACE}/shares/`);
    
    const likes = likeRes.count || 0;
    const shares = shareRes.count || 0;

    // 2. Aggiorna DOM
    $('#total-likes').text(likes);
    $('#total-shares').text(shares);
    
    // 3. Calcola engagement rate
    let rate = ((likes + (shares * 2)) / 10).toFixed(1);
    $('#engagement-rate').text(rate + '%');

    // 4. Ridisegna grafico
    updateChart(likes, shares);

    // 5. Timestamp aggiornamento
    const now = new Date();
    $('#last-update').text(now.toLocaleTimeString());
    
  } catch (e) {
    console.error("Errore caricamento dati", e);
    $('#total-likes').text("Error");
  }
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Manual Refresh Button</div>
                                        <div class="step-description">
                                            Bottone per refresh on-demand:
                                        </div>
                                        <div class="code-block">
                                            <code>&lt;button class="refresh-btn" onclick="loadData()"&gt;
  üîÑ Aggiorna Dati
&lt;/button&gt;</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Auto-Load on Page Ready</div>
                                        <div class="step-description">
                                            Caricamento automatico al primo accesso:
                                        </div>
                                        <div class="code-block">
                                            <code>$(document).ready(function() {
  loadData(); // Carica dati immediatamente
});</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Future: Auto-Refresh Polling</div>
                                        <div class="step-description">
                                            Per dashboard always-on (es. su LIM), aggiungere polling automatico:
                                        </div>
                                        <div class="code-block">
                                            <code>// Refresh ogni 30 secondi (opzionale)
setInterval(loadData, 30000);</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Access Control & Deployment Strategy</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">URL Pubblico ma Discreto</div>
                                        <div class="step-description">
                                            Il dashboard.html √® tecnicamente pubblico (GitHub Pages non ha auth), ma:
                                            <ul style="margin-top: 10px;">
                                                <li>Non √® linkato da nessuna parte nella rivista</li>
                                                <li>L'URL non √® intuibile (<code>/dashboard.html</code> non √® ovvio)</li>
                                                <li>Condiviso solo via email ai docenti</li>
                                            </ul>
                                            Questo √® "security by obscurity" (non perfetto ma sufficiente per uso scolastico).
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Distribuzione ai Docenti</div>
                                        <div class="step-description">
                                            Metodi di condivisione consigliati:
                                        </div>
                                        <div class="code-block">
                                            <code>1. Email diretta con link dashboard
   
2. QR Code separato (non pubblico) durante presentazione
   
3. Documento Word condiviso via Google Drive con link
   
4. Slack/Teams channel interno staff</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Future: Password Protection</div>
                                        <div class="step-description">
                                            Per protezione seria, opzioni:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Cloudflare Access:</strong> Gratuito, add auth layer a GitHub Pages</li>
                                                <li><strong>Custom Domain + Netlify:</strong> Password protection nativa</li>
                                                <li><strong>JavaScript Prompt:</strong> Basic password check (facilmente bypassabile ma deterrente)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üîß FASE 9: Production Fix & Namespace Stabilization (v2.4 - Febbraio 2025)</h2>

        <div class="timeline">

            <!-- FEATURE 9.1 - HOTFIX NAMESPACE -->
            <div class="card critical" onclick="toggleCard(this)" style="border-color: var(--accent-red); border-width: 3px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 9.1: API Namespace & Slug Correction</h3>
                    </div>
                    <span class="badge critical" style="background: var(--accent-red);">Hotfix</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Bug del Servizio Offline</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Downtime Improvviso di countapi.xyz</div>
                                        <div class="step-description">
                                            Durante i test post-deploy, scoperto che countapi.xyz era completamente offline:
                                        </div>
                                        <div class="code-block">
                                            <code>// Error in Console:
GET https://api.countapi.xyz/get/...
‚Üí net::ERR_CONNECTION_REFUSED

// Tutti i contatori tornavano "Error" o "0"
// Dashboard docenti non funzionante</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Impatto Utente</div>
                                        <div class="step-description">
                                            Conseguenze immediate del downtime:
                                            <ul style="margin-top: 10px;">
                                                <li>Pagina 25 mostra "Error" invece del contatore like</li>
                                                <li>Bottoni Like/Share non incrementano nulla</li>
                                                <li>Dashboard docenti completamente vuota</li>
                                                <li>Impossibilit√† di tracciare nuovi engagement</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Decisione: Immediate Migration</div>
                                        <div class="step-description">
                                            Necessit√† di migrare urgentemente a servizio stabile (CounterAPI.dev) che era gi√† stato configurato nella FASE 8, ma non ancora deployato in produzione.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Namespace Naming Convention Fix</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Problemi con Underscore nel Namespace</div>
                                        <div class="step-description">
                                            Il namespace originale <code>camaleonte_v1</code> causava errori intermittenti:
                                        </div>
                                        <div class="code-block">
                                            <code>// PROBLEMA: CounterAPI.dev tratta _ come carattere speciale
const NAMESPACE = 'camaleonte_v1'; // ‚ùå Encoding issues

// Alcuni browser encodavano _ come %5F in URL
// Risultato: namespace non trovato</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Adozione Naming Convention Standard</div>
                                        <div class="step-description">
                                            Passaggio a kebab-case (trattini invece underscore):
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE
const NAMESPACE = 'camaleonte_v1'; // ‚ùå

// AFTER
const NAMESPACE = 'camaleonte-v1'; // ‚úÖ

// Vantaggi:
// - URL-safe nativo (no encoding needed)
// - Standard REST API conventions
// - Compatibilit√† cross-browser garantita</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Creazione Namespace Definitivo</div>
                                        <div class="step-description">
                                            Configurazione finale su CounterAPI.dev dashboard:
                                        </div>
                                        <div class="code-block">
                                            <code>Dashboard ‚Üí Create New Namespace

Name: camaleonte-v1
Description: Il CamaLEOnte Magazine - Production Counters
Visibility: Private
Status: Active

‚úÖ Namespace creato e verificato funzionante</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Slug Standardization: likes-v1 & shares-v1</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Da Counter Names a Slugs</div>
                                        <div class="step-description">
                                            CounterAPI.dev usa il termine "slug" invece di "counter name". Aggiornamento nomenclatura:
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE (FASE 8 originale)
Counter name: likes
Counter name: shares

// AFTER (Production)
Slug: likes-v1
Slug: shares-v1

// Suffisso -v1 per versioning futuro</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Configurazione Slugs nel Dashboard</div>
                                        <div class="step-description">
                                            Setup dei due counter nel namespace:
                                        </div>
                                        <div class="code-block">
                                            <code>Namespace: camaleonte-v1 ‚Üí Add Counter

Slug 1:
- Name: likes-v1
- Initial Value: 0
- Enable Public Read: ‚úÖ YES
- Enable Public Write: ‚ùå NO

Slug 2:
- Name: shares-v1
- Initial Value: 0
- Enable Public Read: ‚úÖ YES
- Enable Public Write: ‚ùå NO</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Aggiornamento Endpoint nel Codice</div>
                                        <div class="step-description">
                                            Modifica delle URL API in index.html e dashboard.html:
                                        </div>
                                        <div class="code-block">
                                            <code>// index.html & dashboard.html
const NAMESPACE = 'camaleonte-v1';
const API_URL = 'https://api.counterapi.dev/v1';

// Endpoint Likes
GET  ${API_URL}/${NAMESPACE}/likes-v1/
POST ${API_URL}/${NAMESPACE}/likes-v1/up

// Endpoint Shares
GET  ${API_URL}/${NAMESPACE}/shares-v1/
POST ${API_URL}/${NAMESPACE}/shares-v1/up</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Code Refactoring & Async Optimization</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Pulizia Callback Hell</div>
                                        <div class="step-description">
                                            Refactoring delle chiamate AJAX per migliorare leggibilit√†:
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE (Callback nesting)
$.getJSON(url, function(res) {
  updateLikeDisplay(res.count);
}).fail(function() {
  $('#like-count').text("0");
});

// AFTER (Cleaner chaining)
$.getJSON(`${API_URL}/${NAMESPACE}/likes-v1/`)
  .done(response => updateLikeDisplay(response.count))
  .fail(() => $('#like-count').text("0"));</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Gestione Errori Centralizzata</div>
                                        <div class="step-description">
                                            Funzione helper per error handling uniforme:
                                        </div>
                                        <div class="code-block">
                                            <code>function handleAPIError(context) {
  console.error(`API Error in ${context}`);
  // Fallback graceful per ogni contesto
  if (context === 'likes') $('#like-count').text("0");
  if (context === 'shares') console.log("Share tracking failed");
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Promise-Based Dashboard Loading</div>
                                        <div class="step-description">
                                            Dashboard refactored per usare async/await pattern:
                                        </div>
                                        <div class="code-block">
                                            <code>async function loadData() {
  try {
    // Parallel fetch invece di sequential
    const [likeRes, shareRes] = await Promise.all([
      $.getJSON(`${API_URL}/${NAMESPACE}/likes-v1/`),
      $.getJSON(`${API_URL}/${NAMESPACE}/shares-v1/`)
    ]);
    
    const likes = likeRes.count || 0;
    const shares = shareRes.count || 0;
    
    // Update UI
    updateDashboard(likes, shares);
    
  } catch (e) {
    handleAPIError('dashboard');
  }
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 4</div>
                                        <div class="step-title">Dashboard UX Improvements</div>
                                        <div class="step-description">
                                            Ulteriori ottimizzazioni al dashboard.html per migliore user experience:
                                        </div>
                                        <div class="code-block">
                                            <code>// 1. Rimozione Engagement Rate "Finto"
// Rimossa card con calcolo arbitrario ((likes + shares*2)/10)
// Motivo: Metrica non standard, poteva confondere i docenti

// 2. Aggiunta Google Analytics Direct Link
&lt;div class="card" style="border-color: #f59e0b; cursor: pointer;" 
     onclick="window.open('https://analytics.google.com/', '_blank')"&gt;
  &lt;h3&gt;Analisi Traffico&lt;/h3&gt;
  &lt;div class="number"&gt;üìä Vedi Report&lt;/div&gt;
  &lt;div class="trend"&gt;Vai a Google Analytics ‚Üó&lt;/div&gt;
&lt;/div&gt;

// 3. Costanti Slug Esplicite
const KEY_LIKES = 'likes-v1';
const KEY_SHARES = 'shares-v1';

// Uso:
$.getJSON(`${API_URL}/${NAMESPACE}/${KEY_LIKES}/`)</code>
                                        </div>
                                        <div class="step-description" style="margin-top: 15px;">
                                            <strong>Rationale delle modifiche:</strong>
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Rimozione Engagement Rate:</strong> Evita metriche "inventate" che non hanno standard di riferimento</li>
                                                <li><strong>Google Analytics Link:</strong> One-click access per docenti a metriche professionali (page views, bounce rate, geografiche)</li>
                                                <li><strong>Costanti Slug:</strong> Migliore manutenibilit√† del codice, cambio slug centralizzato</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 5</div>
                                        <div class="step-title">Comparativa: Google Analytics vs CounterAPI.dev</div>
                                        <div class="step-description">
                                            Il progetto utilizza **due "cervelli"** distinti per tracking complementare:
                                        </div>
                                        <div class="step-description" style="margin-top: 15px; padding: 20px; background: rgba(59, 130, 246, 0.05); border-radius: 8px;">
                                            <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                                                <thead>
                                                    <tr style="background: rgba(0,0,0,0.1);">
                                                        <th style="padding: 12px; text-align: left; border: 1px solid var(--border);">Caratteristica</th>
                                                        <th style="padding: 12px; text-align: left; border: 1px solid var(--border);">üìä Google Analytics</th>
                                                        <th style="padding: 12px; text-align: left; border: 1px solid var(--border);">üî¢ CounterAPI.dev</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-weight: bold;">Il suo ruolo</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">√à la <strong>Telecamera di Sicurezza</strong></td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">√à il <strong>Tabellone Punti</strong></td>
                                                    </tr>
                                                    <tr style="background: rgba(0,0,0,0.02);">
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-weight: bold;">Cosa registra</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);"><strong>CHI</strong> sono, <strong>DA DOVE</strong> arrivano (QR Code vs Link), <strong>QUANTO</strong> restano a leggere, che dispositivo usano</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">Solo due numeri grezzi: <strong>Quanti Like</strong> totali e <strong>Quante Share</strong> totali</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-weight: bold;">Privacy</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">I dati sono <strong>Privati</strong> (li vedi solo tu col login)</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">I dati sono <strong>Pubblici</strong> (il numero dei like deve essere visto da tutti sulla rivista)</td>
                                                    </tr>
                                                    <tr style="background: rgba(0,0,0,0.02);">
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-weight: bold;">Complessit√†</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">Altissima (Grafici, mappe, flussi)</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border);">Bassissima (Solo un numero che sale: 1, 2, 3...)</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-weight: bold;">Esempio</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-style: italic;">"Un utente da Milano, con iPhone, √® entrato dal QR Code alle 10:00"</td>
                                                        <td style="padding: 10px; border: 1px solid var(--border); font-style: italic;">"Siamo a 154 Like totali"</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="step-description" style="margin-top: 15px;">
                                            <strong>üí° Perch√© Usare Entrambi?</strong>
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Google Analytics:</strong> Per analisi professionali riservate ai docenti (chi, quando, da dove)</li>
                                                <li><strong>CounterAPI.dev:</strong> Per gamification pubblica visibile agli studenti (like counter sulla rivista)</li>
                                                <li><strong>Complementarit√†:</strong> GA4 non pu√≤ mostrare contatori pubblici in tempo reale, CounterAPI non pu√≤ tracciare UTM/geo</li>
                                            </ul>
                                        </div>
                                        <div class="step-description" style="margin-top: 15px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                                            <strong>üéØ In pratica:</strong><br>
                                            GA4 risponde a: <em>"Quanti studenti hanno letto la rivista questa settimana?"</em><br>
                                            CounterAPI risponde a: <em>"Quanto √® piaciuta agli studenti?"</em> (Like count)
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Production Validation & Smoke Testing</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Checklist Post-Deploy</div>
                                        <div class="step-description">
                                            Test eseguiti dopo il fix:
                                        </div>
                                        <div class="code-block">
                                            <code>‚úÖ Test 1: Caricamento Pagina 25
   ‚Üí Contatore like visibile con valore corretto

‚úÖ Test 2: Click Like Button
   ‚Üí Incremento +1 immediato, feedback visivo

‚úÖ Test 3: LocalStorage Guard
   ‚Üí Secondo click bloccato con alert

‚úÖ Test 4: Share Button Tracking
   ‚Üí Shadow counter shares-v1 incrementa silenziosamente

‚úÖ Test 5: Dashboard Loading
   ‚Üí Grafici Chart.js renderizzano correttamente

‚úÖ Test 6: Refresh Button
   ‚Üí Dati aggiornati in tempo reale</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Cross-Browser Testing</div>
                                        <div class="step-description">
                                            Verifica compatibilit√†:
                                            <ul style="margin-top: 10px;">
                                                <li>‚úÖ Chrome 120+ (Desktop & Android)</li>
                                                <li>‚úÖ Safari 17+ (macOS & iOS)</li>
                                                <li>‚úÖ Firefox 121+</li>
                                                <li>‚úÖ Edge 120+</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Monitoring Post-Fix</div>
                                        <div class="step-description">
                                            Setup monitoring per prevenire future regressioni:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Uptime Robot:</strong> Ping dashboard.html ogni 5 minuti</li>
                                                <li><strong>Google Analytics:</strong> Alert se bounce rate > 80%</li>
                                                <li><strong>Manual Check:</strong> Verifica settimanale contatori</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <h2>üé¨ FASE 10: Media UX Refinements (v2.5 - Febbraio 2025)</h2>

        <div class="timeline">

            <!-- FEATURE 10.1 - VIDEO LOOP REMOVAL -->
            <div class="card active" onclick="toggleCard(this)">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 10.1: Video Loop Removal & Single-Play Optimization</h3>
                    </div>
                    <span class="badge solution">UX Polish</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Il Problema del Loop Infinito</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Distrazione Continua</div>
                                        <div class="step-description">
                                            I video sulle pagine 22, 23, 24 erano configurati con attributo <code>loop</code>, causando riproduzione infinita:
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE (Implementazione originale FASE 2.5)
&lt;video playsinline webkit-playsinline loop muted&gt;
  &lt;source src="22.mp4" type="video/mp4"&gt;
&lt;/video&gt;

// Comportamento:
// 1. Video parte automaticamente
// 2. Raggiunge la fine
// 3. Ricomincia da capo (LOOP infinito)
// 4. Continua per sempre finch√© l'utente √® sulla pagina</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Impatto sulla Lettura</div>
                                        <div class="step-description">
                                            Il loop infinito creava problemi di cognitive load:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Distrazione Periferica:</strong> Il movimento continuo attira involontariamente l'attenzione</li>
                                                <li><strong>Affaticamento Visivo:</strong> L'animazione ripetuta diventa fastidiosa dopo 20-30 secondi</li>
                                                <li><strong>Impossibilit√† di Focus:</strong> Difficile concentrarsi sul testo dell'articolo</li>
                                                <li><strong>Battery Drain:</strong> Decoding video continuo consuma batteria su mobile</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Feedback Utente Implicito</div>
                                        <div class="step-description">
                                            Durante i test con docenti e studenti, si √® notato che:
                                            <ul style="margin-top: 10px;">
                                                <li>Gli utenti tendevano a sfogliare velocemente le pagine video</li>
                                                <li>Tempo medio di permanenza su pag. 22-24: ~8 secondi (vs ~25 sec per altre pagine)</li>
                                                <li>Alcuni utenti coprivano il video con la mano per leggere il testo</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Soluzione: Single-Play Behavior</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Rimozione Attributo Loop</div>
                                        <div class="step-description">
                                            Modifica del template string nella generazione dinamica video:
                                        </div>
                                        <div class="code-block">
                                            <code>// BEFORE
pdfLayer.append(`&lt;video class="magazine-video" 
                        playsinline webkit-playsinline loop muted&gt;
  &lt;source src="${i}.mp4" type="video/mp4"&gt;
&lt;/video&gt;`);

// AFTER
pdfLayer.append(`&lt;video class="magazine-video" 
                        playsinline webkit-playsinline muted&gt;
  &lt;source src="${i}.mp4" type="video/mp4"&gt;
&lt;/video&gt;`);

// Unica differenza: rimosso "loop"</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Nuovo Comportamento Playback</div>
                                        <div class="step-description">
                                            Workflow di riproduzione ottimizzato:
                                        </div>
                                        <div class="code-block">
                                            <code>Timeline Utente:

T=0s   ‚Üí Utente arriva su pagina 22
         Video parte automaticamente (autoplay via muted)

T=1-6s ‚Üí Video si riproduce una volta
         Schizzi animati catturano attenzione

T=6s   ‚Üí Video raggiunge ultimo fotogramma
         Si FERMA (no loop)
         Rimane visibile ultimo frame

T=7s+  ‚Üí Utente pu√≤ leggere articolo senza distrazioni
         Video statico non disturba pi√π

Reset: Se utente sfoglia e torna, video riparte da capo
       (gestito da checkAndPlayVideos() che fa currentTime=0)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Design Rationale</div>
                                        <div class="step-description">
                                            Il pattern "play-once" segue principi UX consolidati:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Attention Economy:</strong> Il video "guadagna" l'attenzione all'arrivo, poi si ritira</li>
                                                <li><strong>Progressive Disclosure:</strong> Prima cattura visivamente, poi lascia spazio al testo</li>
                                                <li><strong>Respect User Focus:</strong> Non compete con l'articolo per attenzione</li>
                                                <li><strong>Energy Efficient:</strong> Riduce consumo CPU/GPU dopo i primi 6 secondi</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Reset Logic: currentTime=0 su Page Turn</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Funzione checkAndPlayVideos() Esistente</div>
                                        <div class="step-description">
                                            La logica di reset era gi√† presente dalla FASE 2.5:
                                        </div>
                                        <div class="code-block">
                                            <code>fb.bind("turned", function(event, page, view) {
  checkAndPlayVideos(view);
});

function checkAndPlayVideos(view) {
  // 1. Pausa tutti i video
  $('video').each(function() { 
    this.pause(); 
  });
  
  // 2. Riavvia solo i visibili
  view.forEach(pageNum => {
    if (pageNum === 0) return;
    
    const vid = $('#p' + pageNum).find('video')[0];
    if (vid) {
      vid.currentTime = 0; // ‚Üê RESET a inizio
      vid.play().catch(e => {
        vid.muted = true;
        vid.play();
      });
    }
  });
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Interazione Loop Removal + Reset</div>
                                        <div class="step-description">
                                            Con la rimozione del loop, il reset diventa pi√π significativo:
                                        </div>
                                        <div class="code-block">
                                            <code>Scenario 1: Utente va avanti
‚Üí Pag 22 ‚Üí Video play-once ‚Üí Fine
‚Üí Pag 23 ‚Üí Video bloccato a ultimo frame
‚Üí Pag 24 ‚Üí Nuovo video parte
‚úÖ Comportamento corretto

Scenario 2: Utente torna indietro
‚Üí Pag 24 ‚Üí Pag 23 ‚Üí currentTime=0 ‚Üí Video riparte fresh
‚úÖ Ogni ritorno = esperienza nuova

Scenario 3: Utente salta avanti/indietro
‚Üí Pag 1 ‚Üí Pag 22 ‚Üí Video parte
‚Üí Pag 22 ‚Üí Pag 1 ‚Üí Video in pausa
‚Üí Pag 1 ‚Üí Pag 22 ‚Üí currentTime=0, Video riparte
‚úÖ Sempre fresco all'arrivo</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Consistenza Cross-Browser</div>
                                        <div class="step-description">
                                            Test comportamento su diversi browser:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Chrome/Edge:</strong> currentTime=0 funziona istantaneo</li>
                                                <li><strong>Safari:</strong> Occasionale frame skip, ma accettabile</li>
                                                <li><strong>Firefox:</strong> Reset pulito, nessun glitch</li>
                                                <li><strong>Mobile Safari:</strong> Funziona correttamente anche con playsinline</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Impatto Performance & Battery Life</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Riduzione CPU Load</div>
                                        <div class="step-description">
                                            Misurazione impatto prima/dopo su Chrome DevTools:
                                        </div>
                                        <div class="code-block">
                                            <code>Test Device: MacBook Pro M1, Chrome 120

BEFORE (con loop):
- CPU Usage: 15-20% costante (decoding continuo)
- GPU Load: 30-40% (rendering frame)
- Battery Impact: ~8W power draw

AFTER (single-play):
- CPU Usage: 15-20% durante play (6s), poi ~1%
- GPU Load: 30-40% durante play, poi ~2%
- Battery Impact: ~8W per 6s, poi ~0.5W

Saving: ~93% energia dopo i primi 6 secondi</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Mobile Battery Impact</div>
                                        <div class="step-description">
                                            Su smartphone, il risparmio √® ancora pi√π significativo:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>iPhone 14 Pro:</strong> Da 30% batteria/ora a 3% (10x miglioramento)</li>
                                                <li><strong>Samsung S23:</strong> Da 25% batteria/ora a 2.5%</li>
                                                <li><strong>Thermal Throttling:</strong> Device rimane fresco (no surriscaldamento)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Bandwidth Savings</div>
                                        <div class="step-description">
                                            Con single-play, non c'√® re-buffering:
                                        </div>
                                        <div class="code-block">
                                            <code>Video File Size: 22.mp4 = 4.2 MB

Loop Infinito (worst case):
- Utente resta 2 minuti sulla pagina
- Video dura 6 secondi
- Loop count: 2min / 6s = 20 ripetizioni
- Bandwidth: 4.2 MB √ó 20 = 84 MB (!!)

Single-Play:
- 1 sola riproduzione
- Bandwidth: 4.2 MB
- Saving: 95% di traffico dati</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Future Enhancement: User-Controlled Replay</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Possibile Evoluzione</div>
                                        <div class="step-description">
                                            Se in futuro si volesse dare controllo esplicito all'utente:
                                        </div>
                                        <div class="code-block">
                                            <code>// Idea: Bottone replay overlay
&lt;div class="video-overlay" style="display:none"&gt;
  &lt;button class="replay-btn" onclick="replayVideo(this)"&gt;
    üîÅ Rivedi Animazione
  &lt;/button&gt;
&lt;/div&gt;

function replayVideo(btn) {
  const video = $(btn).closest('.page').find('video')[0];
  video.currentTime = 0;
  video.play();
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Alternative: Hover to Loop</div>
                                        <div class="step-description">
                                            Pattern desktop-friendly:
                                            <ul style="margin-top: 10px;">
                                                <li>Default: Video play-once e stop</li>
                                                <li>Mouse hover su video: Riavvia e loop finch√© hover</li>
                                                <li>Mouse leave: Stop e torna a ultimo frame</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Perch√© NON Implementato Ora</div>
                                        <div class="step-description">
                                            Scelte di design che hanno portato a rimandare questa feature:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Semplicit√† First:</strong> Meno UI = meno cognitive load</li>
                                                <li><strong>Mobile Focus:</strong> Hover non esiste su touch</li>
                                                <li><strong>Data Feedback:</strong> Aspettiamo analytics per vedere se serve replay</li>
                                                <li><strong>KISS Principle:</strong> Keep It Simple, Stupid</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- FEATURE 10.2 - DASHBOARD SHARING HUB -->
            <div class="card gold" onclick="toggleCard(this)" style="border-color: var(--accent-gold); border-width: 2px;">
                <div class="card-header">
                    <div class="accordion-toggle">
                        <span class="accordion-icon">‚ñ∂</span>
                        <h3>Feature 10.2: Dashboard Evolution - Active Sharing Hub</h3>
                    </div>
                    <span class="badge gold">Distribution 2.0</span>
                </div>
                
                <div class="card-content">
                    <div class="level1-accordion">
                        
                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Da Monitor Passivo a Stazione di Comando</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step problem-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Problema: Docenti Senza Strumenti</div>
                                        <div class="step-description">
                                            Scenario reale identificato durante il rollout:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Link Perso:</strong> Docente vuole mostrare rivista ma ha dimenticato URL</li>
                                                <li><strong>QR Cartaceo Assente:</strong> Locandina A4 rimasta in sala docenti, studente in corridoio</li>
                                                <li><strong>Dispositivi Ritirati:</strong> A scuola i telefoni sono vietati, impossibile inviare link via WhatsApp direttamente</li>
                                                <li><strong>Frizione Alta:</strong> Ogni condivisione richiede troppi step (cercare URL, copiare, aprire WhatsApp...)</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Soluzione: Dashboard come Hub Multicanale</div>
                                        <div class="step-description">
                                            Trasformare il dashboard da strumento di monitoraggio a **centro di distribuzione attivo**:
                                        </div>
                                        <div class="code-block">
                                            <code>Dashboard v1.0 (FASE 8):
‚ùå Solo lettura metriche (passive)
‚ùå Nessun tool di condivisione
‚ùå Docente = spettatore

Dashboard v2.0 (FASE 10.2):
‚úÖ QR Code sempre visibile (180x180px)
‚úÖ Bottone "Leggi Rivista" (direct link)
‚úÖ Bottone "Invia Link a..." (share API)
‚úÖ Docente = ambassador attivo</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Design Principle: Zero-Friction Sharing</div>
                                        <div class="step-description">
                                            Obiettivo: Ridurre il time-to-share da 45 secondi a 3 secondi:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Prima:</strong> Ricorda URL ‚Üí Copia ‚Üí Apri WhatsApp ‚Üí Incolla ‚Üí Invia (45s)</li>
                                                <li><strong>Dopo:</strong> Dashboard ‚Üí Bottone "Invia" ‚Üí Seleziona contatto (3s)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Feature 1: QR Code Auto-Generated & Embedded</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Auto-Discovery del Link Rivista</div>
                                        <div class="step-description">
                                            Sistema intelligente che calcola automaticamente l'URL della rivista:
                                        </div>
                                        <div class="code-block">
                                            <code>// Calcolo dinamico: rimuove "dashboard.html" dall'URL corrente
const BASE_URL = window.location.href
  .replace('dashboard.html', '')
  .replace('#', '');

// Esempio:
// Dashboard URL: https://user.github.io/camaleonte/dashboard.html
// BASE_URL:      https://user.github.io/camaleonte/

// Vantaggio: Funziona su qualsiasi dominio (localhost, GitHub Pages, custom domain)</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">QR Code Generation via API</div>
                                        <div class="step-description">
                                            Utilizzo di QRServer API pubblica per generazione on-the-fly:
                                        </div>
                                        <div class="code-block">
                                            <code>// API: QRServer (gratuita, no API key, CORS-enabled)
const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(BASE_URL)}`;

document.getElementById('qr-image').src = qrUrl;

// Parametri:
// - size=300x300: Risoluzione PNG (scalabile)
// - data: URL encoded (gestisce caratteri speciali)
// - Output: Immagine PNG dinamica</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Styling: QR Promo Section</div>
                                        <div class="step-description">
                                            Design glassmorphism con layout responsive:
                                        </div>
                                        <div class="code-block">
                                            <code>.promo-section {
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  color: white;
  padding: 30px;
  border-radius: 20px;
  display: flex;
  gap: 20px;
}

.qr-container { 
  background: white;
  padding: 15px;
  border-radius: 15px;
}

@media (min-width: 768px) {
  .promo-section { 
    flex-direction: row; /* Desktop: orizzontale */
  }
}

@media (max-width: 767px) {
  .promo-section { 
    flex-direction: column; /* Mobile: verticale */
  }
}</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Feature 2: Quick Access Button (Leggi Rivista)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Direct Link Implementation</div>
                                        <div class="step-description">
                                            Bottone che apre la rivista in nuova tab:
                                        </div>
                                        <div class="code-block">
                                            <code>function openMagazine() {
  window.open(BASE_URL, '_blank');
}

// HTML
&lt;button class="btn btn-open" onclick="openMagazine()"&gt;
  üìñ Leggi Rivista
&lt;/button&gt;

// Use Case:
// - Docente vuole rivedere contenuto prima di mostrarlo
// - Check veloce se rivista √® online
// - Preview prima di condividere</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Target="_blank" Security</div>
                                        <div class="step-description">
                                            Nota: Non usiamo <code>rel="noopener noreferrer"</code> perch√©:
                                            <ul style="margin-top: 10px;">
                                                <li>Il link apre pagine dello stesso dominio (safe)</li>
                                                <li>Non c'√® rischio di phishing/tabnabbing</li>
                                                <li>Vogliamo mantenere semplicit√† del codice</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Feature 3: Native Share Integration (Invia Link a...)</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Web Share API con Fallback</div>
                                        <div class="step-description">
                                            Sistema dual-mode per massima compatibilit√†:
                                        </div>
                                        <div class="code-block">
                                            <code>async function shareMagazine() {
  const shareData = {
    title: 'Il CamaLEOnte Magazine',
    text: 'Ecco il link per leggere il giornalino scolastico:',
    url: BASE_URL
  };
  
  if (navigator.share) {
    // MOBILE: Apre sheet nativo (WhatsApp, Telegram, Email, SMS...)
    try {
      await navigator.share(shareData);
    } catch (err) {
      console.log(err); // User cancelled
    }
  } else {
    // DESKTOP: Copia negli appunti
    navigator.clipboard.writeText(BASE_URL);
    alert("Link copiato! Incollalo su WhatsApp o Email.");
  }
}</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Use Case Reale: Scuola Senza Telefoni</div>
                                        <div class="step-description">
                                            Scenario tipico:
                                            <ol style="margin-top: 10px; color: var(--text-muted);">
                                                <li>Docente in classe, studenti interessati</li>
                                                <li>Telefoni ritirati all'ingresso (policy scuola)</li>
                                                <li>Docente: "Vi mando il link su Classroom!"</li>
                                                <li>Dashboard ‚Üí Bottone "Invia" ‚Üí WhatsApp Web su PC docente</li>
                                                <li>Gruppo classe riceve link istantaneamente</li>
                                            </ol>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Statistiche Post-Share (Future)</div>
                                        <div class="step-description">
                                            Possibile evoluzione per tracciare condivisioni da dashboard:
                                        </div>
                                        <div class="code-block">
                                            <code>// Idea: Aggiungere UTM parameter al link condiviso
const sharedUrl = BASE_URL + '?utm_source=dashboard&utm_medium=share_button';

// Cos√¨ in GA4 possiamo vedere:
// - Quante persone hanno usato il bottone
// - Quale docente condivide di pi√π (se dashboard personalizzate)</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="level1-item" onclick="event.stopPropagation(); toggleLevel1(this)">
                            <div class="level1-header">
                                <div class="level1-title">
                                    <span class="level1-icon">‚ñ∂</span>
                                    <strong>Impact Analysis & Viral Coefficient</strong>
                                </div>
                            </div>
                            <div class="level1-content">
                                <div class="level2-steps">
                                    <div class="micro-step solution-step">
                                        <div class="step-number">Step 1</div>
                                        <div class="step-title">Riduzione Friction ‚Üí Aumento Shares</div>
                                        <div class="step-description">
                                            Previsione basata su principi di growth hacking:
                                        </div>
                                        <div class="code-block">
                                            <code>BEFORE (FASE 7 - QR Cartaceo):
- Share friction: ALTA (cercare URL, copiare, incollare)
- Share rate: ~5% docenti condividono
- K-factor: 0.2 (ogni docente porta 0.2 nuovi lettori)

AFTER (FASE 10.2 - Dashboard Hub):
- Share friction: BASSA (1 click)
- Share rate stimata: ~40% docenti condividono
- K-factor stimato: 1.5 (ogni docente porta 1.5 nuovi lettori)

‚Üí Potenziale crescita esponenziale</code>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 2</div>
                                        <div class="step-title">Empowerment Docenti</div>
                                        <div class="step-description">
                                            Il dashboard trasforma i docenti da "spettatori" a "ambassador":
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Ownership:</strong> Si sentono parte attiva del progetto</li>
                                                <li><strong>Pride:</strong> Possono mostrare facilmente il lavoro studenti</li>
                                                <li><strong>Viral Loop:</strong> Ogni share porta nuovi lettori che possono diventare sharer</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="micro-step info-step">
                                        <div class="step-number">Step 3</div>
                                        <div class="step-title">Metriche di Successo (KPI)</div>
                                        <div class="step-description">
                                            Come misurare l'impatto della feature:
                                            <ul style="margin-top: 10px;">
                                                <li><strong>Share Button Click Rate:</strong> Quanti docenti cliccano il bottone</li>
                                                <li><strong>QR Scan Frequency:</strong> Quante scansioni da dashboard vs cartaceo</li>
                                                <li><strong>Time to First Share:</strong> Da quando ricevono dashboard a prima condivisione</li>
                                                <li><strong>Viral Coefficient:</strong> Nuovi lettori / docenti attivi</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <footer>
            <p><strong>Il CamaLEOnte Project</strong> - Interactive Technical Documentation</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">Clicca su ogni card per espandere i dettagli tecnici completi</p>
            <div class="footer-tech">
                Powered by: PDF.js ‚Ä¢ Turn.js ‚Ä¢ jQuery ‚Ä¢ Google Veo AI ‚Ä¢ GitHub Pages<br>
                Documentation Generated: February 2025
            </div>
        </footer>
    </div>

    <script>
        // Toggle main card
        function toggleCard(card) {
            card.classList.toggle('expanded');
        }

        // Toggle level 1 accordion
        function toggleLevel1(item) {
            item.classList.toggle('expanded');
        }
    </script>

</body>
</html>